/*! ableplayer V2.1.0 */
"use strict";!function(a){a(document).ready(function(){a("video, audio").each(function(b,c){void 0!==a(c).data("able-player")&&new AblePlayer(a(this),a(c))})}),window.onYouTubeIframeAPIReady=function(){AblePlayer.youtubeIframeAPIReady=!0,a("body").trigger("youtubeIframeAPIReady",[])},a(window).keydown(function(a){1===AblePlayer.nextIndex&&AblePlayer.lastCreated.onPlayerKeyPress(a)}),window.AblePlayer=function(b){if(AblePlayer.lastCreated=this,this.setDefaults(),this.media=b,0!==a(b).length){this.autoplay=void 0!==a(b).attr("autoplay")&&"false"!==a(b).attr("autoplay")?!0:!1;var c=b.data("include-transcript");if((void 0===c||""===c)&&b.find('track[kind="captions"], track[kind="subtitles"]').length>0&&(c=!0),this.includeTranscript=c?!0:!1,this.startTime=void 0!==a(b).data("start-time")&&""!==a(b).data("start-time")?a(b).data("start-time"):0,void 0!==a(b).data("transcript-div")&&""!==a(b).data("transcript-div")&&(this.transcriptDivLocation=a(b).data("transcript-div")),void 0!==a(b).data("use-transcript-button")&&a(b).data("use-transcript-button")===!1&&(this.useTranscriptButton=!1),void 0!==a(b).data("lyrics-mode")&&"false"!==a(b).data("lyrics-mode")&&(this.lyricsMode=!0),void 0!==a(b).data("transcript-title")&&(this.transcriptTitle=a(b).data("transcript-title")),void 0!==a(b).data("youtube-id")&&""!==a(b).data("youtube-id")&&(this.youtubeId=a(b).data("youtube-id")),void 0!==a(b).data("youtube-desc-id")&&""!==a(b).data("youtube-desc-id")&&(this.youtubeDescId=a(b).data("youtube-desc-id")),void 0!==a(b).data("debug")&&"false"!==a(b).data("debug")&&(this.debug=!0),void 0!==a(b).data("volume")&&""!==a(b).data("volume")){var d=a(b).data("volume");d>=0&&1>=d&&(this.defaultVolume=d)}if(void 0!==a(b).data("icon-type")&&""!==a(b).data("icon-type")){var e=a(b).data("icon-type");("font"===e||"image"==e)&&(this.iconType=e)}if(void 0!==a(b).data("seek-interval")&&""!==a(b).data("seek-interval")){var f=a(b).data("seek-interval");/^[1-9][0-9]*$/.test(f)&&(this.seekInterval=f,this.useFixedSeekInterval=!0)}if(void 0!==a(b).data("show-now-playing")&&"false"!==a(b).data("show-now-playing")&&(this.showNowPlaying=!0),void 0!==a(b).data("fallback")&&""!==a(b).data("fallback")){var g=a(b).data("fallback");"jw"===g&&(this.fallback=g)}if(void 0!==a(b).data("test-fallback")&&"false"!==a(b).data("test-fallback")&&(this.testFallback=!0),void 0!==a(b).data("fallback-path")&&"false"!==a(b).data("fallback-path")&&(this.fallbackPath=a(b).data("fallback-path")),void 0!==a(b).data("translation-path")&&"false"!==a(b).data("translation-path")&&(this.translationPath=a(b).data("translation-path")),void 0!==a(b).data("lang")&&""!==a(b).data("lang")){var h=a(b).data("lang");2==h.length&&(this.lang=h)}void 0!==a(b).data("force-lang")&&"false"!==a(b).data("force-lang")&&(this.forceLang=!0),void 0!==a(b).data("meta-div")&&""!==a(b).data("meta-div")&&(this.metaDiv=a(b).data("meta-div")),void 0!==a(b).data("search")&&""!==a(b).data("search")&&void 0!==a(b).data("search-div")&&""!==a(b).data("search-div")&&(this.searchString=a(b).data("search"),this.searchDiv=a(b).data("search-div")),this.ableIndex=AblePlayer.nextIndex,AblePlayer.nextIndex+=1,this.title=a(b).attr("title"),this.tt=[];var i=this;a.when(this.getTranslationText()).then(function(){i.countProperties(i.tt)>50&&(i.setup(),i.startTime>0&&!i.autoplay&&i.onMediaUpdateTime())})}},AblePlayer.nextIndex=0,AblePlayer.prototype.setup=function(){var a=this;this.debug&&this.startTime>0,this.reinitialize().then(function(){a.player?a.setupInstance().then(function(){a.recreatePlayer()}):a.provideFallback()})},AblePlayer.youtubeIframeAPIReady=!1,AblePlayer.loadingYoutubeIframeAPI=!1}(jQuery),function(a){AblePlayer.prototype.setDefaults=function(){this.debug=!1,this.rootPath=this.getRootWebSitePath(),this.defaultVolume=.5,this.playerWidth=480,this.playerHeight=360,this.iconColor="white",this.iconType="font",this.seekInterval=10,this.useFixedSeekInterval=!1,this.useSlider=!0,this.showNowPlaying=!0,this.fallback="jw",this.fallbackPath=this.rootPath+"/thirdparty/",this.testFallback=!1,this.translationPath=this.rootPath+"/translations/",this.lang="en",this.forceLang=!1,this.loop=!0,this.lyricsMode=!1,this.transcriptTitle="Transcript",this.useTranscriptButton=!0,this.setButtonImages()},AblePlayer.prototype.getRootWebSitePath=function(){var a=document.location.toString(),b=a.indexOf("/",a.indexOf("://")+3),c=a.substring(0,b)+"/",d=a.indexOf("/",a.indexOf(c)+c.length),e=a.substring(0,d);return e},AblePlayer.prototype.setButtonImages=function(){var a="../images/"+this.iconColor+"/";this.playButtonImg=a+"play.png",this.pauseButtonImg=a+"pause.png",this.rewindButtonImg=a+"rewind.png",this.forwardButtonImg=a+"forward.png",this.fasterButtonImg=a+"slower.png",this.slowerButtonImg=a+"faster.png",this.volumeMuteButtonImg=a+"volume-mute.png",this.volumeLoudButtonImg=a+"volume-loud.png",this.volumeIncreaseButtonImg=a+"volume-up.png",this.volumeDecreaseButtonImg=a+"volume-down.png",this.captionsButtonImg=a+"captions.png",this.chaptersButtonImg=a+"chapters.png",this.signButtonImg=a+"sign.png",this.transcriptButtonImg=a+"transcript.png",this.descriptionsButtonImg=a+"descriptions.png",this.fullscreenExpandButtonImg=a+"fullscreen-expand.png",this.fullscreenCollapseButtonImg=a+"fullscreen-collapse.png",this.prefsButtonImg=a+"preferences.png",this.helpButtonImg=a+"help.png"},AblePlayer.prototype.reinitialize=function(){var b=new a.Deferred,c=b.promise();if(window.console||(this.debug=!1),this.startedPlaying=!1,this.autoScrollTranscript=!0,this.$media=a(this.media).first(),this.media=this.$media[0],this.$media.is("audio"))this.mediaType="audio";else{if(!this.$media.is("video"))return this.mediaType=this.$media.get(0).tagName,this.debug,b.fail(),c;this.mediaType="video"}return this.$sources=this.$media.find("source"),this.debug,this.player=this.getPlayer(),this.setIconType(),this.setDimensions(),b.resolve(),c},AblePlayer.prototype.setDimensions=function(){this.$media.attr("width")&&(this.playerWidth=parseInt(this.$media.attr("width"),10)),this.$media.attr("height")&&(this.playerHeight=parseInt(this.$media.attr("height"),10))},AblePlayer.prototype.setIconType=function(){var b;b=a("<span>",{"class":"icon-play able-clipped"}),a("body").append(b),"font"===this.iconType&&(window.getComputedStyle?(this.controllerFont=window.getComputedStyle(b.get(0),null).getPropertyValue("font-family"),this.controllerFont?(this.controllerFont=this.controllerFont.replace(/["']/g,""),this.iconType="font"):this.iconType="image"):this.iconType="image"),this.debug&&"font"===this.iconType,b.remove()},AblePlayer.prototype.setupInstance=function(){var b=new a.Deferred,c=b.promise();return this.$media.attr("id")?this.mediaId=this.$media.attr("id"):(this.mediaId="ableMediaId_"+this.ableIndex,this.$media.attr("id",this.mediaId)),this.setupInstancePlaylist(),b.resolve(),c},AblePlayer.prototype.setupInstancePlaylist=function(){var b=this;if(this.hasPlaylist=!1,a(".able-playlist").each(function(){if(a(this).data("player")===b.mediaId){b.hasPlaylist=!0,b.$playlist=a(this).find("li"),a(this).find("li").attr("tabindex","0"),b.playlistIndex=0;var c=a(this).data("embedded");b.playlistEmbed="undefined"!=typeof c&&c!==!1?!0:!1}}),this.hasPlaylist&&this.playlistEmbed){var c=this.$playlist.parent();this.$playlistDom=c.clone(),c.remove()}},AblePlayer.prototype.recreatePlayer=function(){var a=this;return this.player?(this.setMediaAttributes(),this.loadCurrentPreferences(),this.injectPlayerCode(),this.initSignLanguage(),void this.setupTracks().then(function(){a.setupPopups(),a.initDescription(),a.updateDescription(),a.initializing=!1,a.initPlayer(),a.initDefaultCaption(),a.updateCaption(),a.updateTranscript(),a.showSearchResults()})):void console.log("Can't create player; no appropriate player type detected.")},AblePlayer.prototype.initPlayer=function(){var b,c=this;this.debug&&this.player,"html5"===this.player?b=this.initHtml5Player():"jw"===this.player?b=this.initJwPlayer():"youtube"===this.player&&(b=this.initYoutubePlayer());var d=new a.Deferred,e=d.promise();return b.done(function(){if(c.addControls(),c.addEventListeners(),c.setMute(!1),c.setFullscreen(!1),c.setVolume(c.defaultVolume),c.initializing=!0,c.initializing=!1,c.refreshControls(),"html5"===c.player&&c.isIOS()&&c.$media[0].load(),c.useFixedSeekInterval===!1){var a=c.getDuration();a>0?(c.seekInterval=Math.max(c.seekInterval,a/10),c.seekIntervalCalculated=!0):c.seekIntervalCalculated=!1}d.resolve()}),e},AblePlayer.prototype.initDefaultCaption=function(){var a;if(this.captions.length>0)for(a=0;a<this.captions.length;a++)this.captions[a].def===!0&&(this.captionLang=this.captions[a].language,this.selectedCaptions=this.captions[a]);if("undefined"==typeof this.captionLang)for(a=0;a<this.captions.length;a++)this.captions[a].language===this.lang&&(this.captionLang=this.captions[a].language,this.selectedCaptions=this.captions[a]);"undefined"==typeof this.captionLang&&(this.captionLang=this.captions[0].language,this.selectedCaptions=this.captions[0])},AblePlayer.prototype.initHtml5Player=function(){var b=new a.Deferred,c=b.promise();return b.resolve(),c},AblePlayer.prototype.initJwPlayer=function(){var b,c=this,d=new a.Deferred,e=d.promise();return a.getScript(this.fallbackPath+"jwplayer.js").done(function(){c.debug,c.jwId=c.mediaId+"_fallback",c.$mediaContainer.attr("id",c.jwId),b="audio"===c.mediaType?"0px":c.playerHeight;var e=[];a.each(c.$sources,function(b,c){e.push({file:a(c).attr("src")})});var f=c.fallbackPath+"jwplayer.flash.swf",g=c.fallbackPath+"jwplayer.html5.js";c.jwPlayer=jwplayer(c.jwId).setup("video"===c.mediaType?{playlist:[{sources:e}],flashplayer:f,html5player:g,image:c.$media.attr("poster"),controls:!1,volume:100*c.defaultVolume,height:b,width:c.playerWidth,fallback:!1,primary:"flash",wmode:"transparent"}:{playlist:[{sources:e}],flashplayer:f,html5player:g,controls:!1,volume:100*this.defaultVolume,height:b,fallback:!1,primary:"flash"}),c.$media.remove(),d.resolve()}).fail(function(){c.debug,c.player=null,d.fail()}),e},AblePlayer.prototype.initYoutubePlayer=function(){var b=this,c=new a.Deferred,d=c.promise(),e=function(){var d=b.mediaId+"_youtube";b.$mediaContainer.prepend(a("<div>").attr("id",d));var e;e=b.youtubeDescId&&b.prefDesc?b.youtubeDescId:b.youtubeId,b.youtubePlayer=new YT.Player(d,{videoId:e,height:b.playerHeight.toString(),width:b.playerWidth.toString(),playerVars:{start:b.startTime,controls:0},events:{onReady:function(){c.resolve()},onError:function(){c.fail()}}}),b.$media.remove()};return AblePlayer.youtubeIframeAPIReady?e():(AblePlayer.loadingYoutubeIframeAPI||a.getScript("https://www.youtube.com/iframe_api").fail(function(){b.debug}),a("body").on("youtubeIframeAPIReady",function(){e()})),d},AblePlayer.prototype.setMediaAttributes=function(){this.$media.attr("tabindex",-1);var a=this.$media.get(0).textTracks;if(a)for(var b=0;b<a.length;)a[b].mode="disabled",b+=1},AblePlayer.prototype.getPlayer=function(){return this.youtubeId?"video"!==this.mediaType?null:"youtube":this.testFallback||(this.isUserAgent("msie 7")||this.isUserAgent("msie 8")||this.isUserAgent("msie 9"))&&"video"===this.mediaType||this.isIOS()&&(this.isIOS(4)||this.isIOS(5)||this.isIOS(6))?"jw"===this.fallback&&this.jwCanPlay()?"jw":null:this.media.canPlayType?"html5":null},AblePlayer.prototype.jwCanPlay=function(){var b,c,d;if(this.$sources.length>0)for(b=0;b<this.$sources.length;b++)if(c=this.$sources[b].getAttribute("type"),"video"===this.mediaType&&"video/mp4"===c||"audio"===this.mediaType&&"audio/mpeg"===c)return!0;if(a(".able-playlist")&&(d=a(".able-playlist").eq(0).find("li").eq(0),"audio"===this.mediaType)){if(d.attr("data-mp3"))return!0;if("video"===this.mediaType&&d.attr("data-mp4"))return!0}return!1}}(jQuery),function(a){AblePlayer.prototype.setCookie=function(b){a.cookie.json=!0,a.isFunction(a.cookie)&&a.cookie("Able-Player",b,90)},AblePlayer.prototype.getCookie=function(){var b={preferences:{}};if(a.cookie.json=!0,a.isFunction(a.cookie)){var c;try{c=a.cookie("Able-Player")}catch(d){this.setCookie(b),c=b}return c?c:b}},AblePlayer.prototype.getAvailablePreferences=function(){var a=[];return a.push({name:"prefAltKey",label:this.tt.prefAltKey,"default":1}),a.push({name:"prefCtrlKey",label:this.tt.prefCtrlKey,"default":1}),a.push({name:"prefShiftKey",label:this.tt.prefShiftKey,"default":0}),"video"===this.mediaType?(a.push({name:"prefCaptions",label:this.tt.prefCaptions,"default":1}),a.push({name:"prefSignLanguage",label:this.tt.prefSignLanguage,"default":1}),a.push({name:"prefDesc",label:this.tt.prefDesc,"default":0}),a.push({name:"prefClosedDesc",label:this.tt.prefClosedDesc,"default":0}),a.push({name:"prefDescPause",label:this.tt.prefDescPause,"default":0}),a.push({name:"prefVisibleDesc",label:this.tt.prefVisibleDesc,"default":1}),a.push({name:"prefTranscript",label:this.tt.prefTranscript,"default":0}),a.push({name:"prefHighlight",label:this.tt.prefHighlight,"default":1}),a.push({name:"prefTabbable",label:this.tt.prefTabbable,"default":0})):(a.push({name:"prefTranscript",label:this.tt.prefTranscript,"default":0}),a.push({name:"prefHighlight",label:this.tt.prefHighlight,"default":1}),a.push({name:"prefTabbable",label:this.tt.prefTabbable,"default":0})),a},AblePlayer.prototype.loadCurrentPreferences=function(){for(var a=this.getAvailablePreferences(),b=this.getCookie(),c=0;c<a.length;c++){var d=a[c].name,e=a[c]["default"];void 0!==b.preferences[d]?this[d]=b.preferences[d]:(b.preferences[d]=e,this[d]=e)}this.setCookie(b)},AblePlayer.prototype.injectPrefsForm=function(){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;for(o=this,p=this.getAvailablePreferences(),b=a("<div>",{"class":"able-prefs-form"}),c="<p>"+this.tt.prefIntro+"</p>\n",d=a("<p>",{html:c}),e=a("<fieldset>"),f=a("<legend>"+this.tt.prefFeatures+"</legend>"),e.append(f),g=a("<fieldset>"),h=a("<legend>"+this.tt.prefKeys+"</legend>"),g.append(h),i=0;i<p.length;i++)j=p[i].name,k=a("<div>"),l=this.mediaId+"_"+j,m=a('<label for="'+l+'"> '+p[i].label+"</label>"),n=a("<input>",{type:"checkbox",name:j,id:l,value:"true"}),k.append(n).append(m),1===this[j]&&n.prop("checked",!0),0===i||1===i||2===i?g.append(k):e.append(k);b.append(d).append(g).append(e),a("body").append(b);var q=new AccessibleDialog(b,"dialog",o.tt.prefTitle,d,o.tt.closeButtonLabel,"32em");b.append("<hr>");var r=a('<button class="modal-button">'+this.tt.save+"</button>"),s=a('<button class="modal-button">'+this.tt.cancel+"</button>");r.click(function(){q.hide(),o.savePrefsFromForm()}),s.click(function(){q.hide()}),b.append(r),b.append(s),this.prefsDialog=q},AblePlayer.prototype.savePrefsFromForm=function(){var b;b=0;for(var c=this.getCookie(),d=this.getAvailablePreferences(),e=0;e<d.length;e++){var f=d[e].name;a('input[name="'+f+'"]').is(":checked")?(c.preferences[f]=1,1===this[f]||(this[f]=1,b++)):(c.preferences[f]=0,1===this[f]&&(this[f]=0,b++))}b>0?(this.setCookie(c),this.showAlert(this.tt.prefSuccess)):this.showAlert(this.tt.prefNoChange),this.updatePrefs()},AblePlayer.prototype.updatePrefs=function(){var b;b=1===this.prefAltKey?"Alt + ":"",1===this.prefCtrlKey&&(b+="Control + "),1===this.prefShiftKey&&(b+="Shift + "),a(".able-help-modifiers").text(b),1===this.prefTabbable?a(".able-transcript span.able-transcript-seekpoint").attr("tabindex","0"):a(".able-transcript span.able-transcript-seekpoint").removeAttr("tabindex"),this.updateCaption(),this.updateDescription()},AblePlayer.prototype.usingModifierKeys=function(a){return(1!==this.prefAltKey||a.altKey)&&(1!==this.prefCtrlKey||a.ctrlKey)&&(1!==this.prefShiftKey||a.shiftKey)?!0:!1}}(jQuery),function(a){function b(a,b){var d=[];for(var e in b)d.push(c(a,b[e]));return d}function c(a,b){var c=b(a);if(null!==a.error)throw a.error;return c}function d(a,b){for(var c in b)"\n"===b[c]?(a.column=1,a.line+=1):a.column+=1}function e(a,b){var c=a.text.substring(0,b);return d(a,c),a.text=a.text.substring(b),c}function f(a){var b,c=a.text.indexOf("\n");return-1===c?(b=a.text,d(a,b),a.text=""):(b=a.text.substring(0,c),d(a,b+"\n"),a.text=a.text.substring(c+1)),b}function g(a){var b=a.text.indexOf("\n");return-1===b?a.text:a.text.substring(0,b)}function h(a){b(a,[s,t]);var c=a.text[0];" "===c||"	"===c||"\n"===c?b(a,[x,i,z,m]):a.error="WEBVTT signature not followed by whitespace."}function i(a){for(;;){var b=g(a);if(-1!==b.indexOf("-->"))return;if(0===b.length)return;var d=c(a,k);a.metadata[d[0]]=d[1],c(a,x)}}function j(a){var b=[],c=a.indexOf(" ");c>=0&&b.push(c);var d=a.indexOf("	");d>=0&&b.push(d);var e=a.indexOf("\n");return e>=0&&b.push(e),Math.min.apply(null,b)}function k(a){var b=a.text.indexOf("\n"),c=e(a,b),d=c.indexOf(":");if(-1===d)return void(a.error="Missing colon.");var f=c.substring(0,d),g=c.substring(d+1);return[f,g]}function l(a){var b=j(a.text),c=e(a,b),d=c.indexOf(":");if(-1===d)return void(a.error="Missing colon.");var f=c.substring(0,d),g=c.substring(d+1);return[f,g]}function m(d){for(;;){var e=g(d);if(0!==e.indexOf("NOTE")||4!==e.length&&" "!==e[4]&&"	"!==e[4]){if(0===a.trim(e).length)return;c(d,n)}else b(d,[r,y])}}function n(a){var d,h=g(a);-1===h.indexOf("-->")&&(d=f(a));var i=b(a,[A,w,u,w,A]),j=i[0],k=i[4];if(j>=k)return void(a.error="Start time is not sooner than end time.");c(a,v);var l=c(a,o);e(a,1);var m=c(a,p);a.cues.push({id:d,start:j,end:k,settings:l,components:m})}function o(a){for(var b={};a.text.length>0&&"\n"!==a.text[0];){var d=c(a,l);b[d[0]]=d[1],c(a,v)}return b}function p(b){for(var d={type:"internal",tagName:"",value:"",classes:[],annotation:"",parent:null,children:[],language:""},f=d,h=[];b.text.length>0;){var i=g(b);if(-1!==i.indexOf("-->"))break;if(b.text.length>=2&&"\n"===b.text[0]&&"\n"===b.text[1]){e(b,2);break}var j=q(b);if("string"===j.type)f.children.push(j);else if("startTag"===j.type)j.type=j.tagName,j.parent=f,-1!==a.inArray(j.tagName,["c","i","b","u","ruby"])?(h.length>0&&(f.language=h[h.length-1]),f.children.push(j),f=j):"rt"===j.tagName&&"ruby"===f.tagName?(h.length>0&&(f.language=h[h.length-1]),f.children.push(j),f=j):"v"===j.tagName?(j.value=j.annotation,h.length>0&&(f.language=h[h.length-1]),f.children.push(j),f=j):"lang"===j.tagName&&(h.push(j.annotation),h.length>0&&(f.language=h[h.length-1]),f.children.push(j),f=j);else if("endTag"===j.type)j.tagName===f.type&&-1!==a.inArray(j.tagName,["c","i","b","u","ruby","rt","v"])?f=f.parent:"lang"===j.tagName&&"lang"===f.type?(f=f.parent,h.pop()):"ruby"===j.tagName&&"rt"===f.type&&(f=f.parent.parent);else if("timestampTag"===j.type){var k={text:j.value,error:null,metadata:{},cues:[],line:1,column:1};try{var l=c(k,A);0===k.text.length&&(j.value=l,f.push(j))}catch(m){}}}return d}function q(b){for(var c="data",d=[],f="",g={type:"",tagName:"",value:"",classes:[],annotation:"",children:[]};;){var h;if(h=b.text.length>=2&&"\n"===b.text[0]&&"\n"===b.text[1]?"":b.text.length>0?b.text[0]:"","data"===c)if("&"===h)f="&";else if("<"===h){if(0!==d.length)return g.type="string",g.value=d.join(""),g;c="tag"}else{if(""===h)return{type:"string",value:d.join("")};d.push(h)}else if("escape"===c)if("&"===h)d.push(f),f="&";else if(h.match(/[0-9a-z]/))f+=h;else if(";"===h)"&amp"===f?d.push("&"):"&lt"===f?d.push("<"):"&gt"===f?d.push(">"):"&lrm"===f?d.push("‎"):"&rlm"===f?d.push("‏"):"&nbsp"===f?d.push(" "):(d.push(f),d.push(";")),c="data";else{if("<"===h||""===h)return d.push(f),g.type="string",g.value=d.join(""),g;d.push(f),c="data"}else if("tag"===c)if("	"===h||"\n"===h||"\f"===h||" "===h)c="startTagAnnotation";else if("."===h)c="startTagClass";else if("/"===h)c="endTag";else if(h.match("[0-9]"))c="timestampTag",d.push(h);else{if(">"===h){e(b,1);break}if(""===h)return g.tagName="",g.type="startTag",g;d.push(h),c="startTag"}else if("startTag"===c)if("	"===h||"\f"===h||" "===h)c="startTagAnnotation";else if("\n"===h)f=h,c="startTagAnnotation";else if("."===h)c="startTagClass";else{if(">"===h)return e(b,1),g.tagName=d.join(""),g.type="startTag",g;if(""===h)return g.tagName=d.join(""),g.type="startTag",g;d.push(h)}else if("startTagClass"===c)if("	"===h||"\f"===h||" "===h)g.classes.push(f),f="",c="startTagAnnotation";else if("\n"===h)g.classes.push(f),f=h,c="startTagAnnotation";else if("."===h)g.classes.push(f),f="";else{if(">"===h)return e(b,1),g.classes.push(f),g.type="startTag",g.tagName=d.join(""),g;if(""===h)return g.classes.push(f),g.type="startTag",g.tagName=d.join(""),g;f+="c"}else if("startTagAnnotation"===c){if(">"===h)return e(b,1),f=a.trim(f).replace(/ +/," "),g.type="startTag",g.tagName=d.join(""),g.annotation=f,g;if(""===h)return f=a.trim(f).replace(/ +/," "),g.type="startTag",g.tagName=d.join(""),g.annotation=f,g;f+=h}else if("endTag"===c){if(">"===h)return e(b,1),g.type="endTag",g.tagName=d.join(""),g;if(""===h)return g.type="endTag",g.tagName=d.join(""),g;d.push(h)}else{if("timestampTag"!==c)throw"Unknown tokenState "+c;if(">"===h)return e(b,1),g.type="timestampTag",g.name=d.join(""),g;if(""===h)return g.type="timestampTag",g.name=d.join(""),g;d.push(h)}e(b,1)}}function r(b){var c=f(b);if(-1!==c.indexOf("-->"))return void(b.error="Invalid syntax: --> in NOTE line.");for(;;){var d=g(b);if(0===a.trim(d).length)return;if(-1!==d.indexOf("-->"))return void(b.error="Invalid syntax: --> in comment.");f(b)}}function s(a){"﻿"===a.text[0]&&e(a,1)}function t(a){"WEBVTT"===a.text.substring(0,6)?e(a,6):a.error="Invalid signature."}function u(a){a.text.length<3||"-->"!==a.text.substring(0,3)?a.error="Missing -->":e(a,3)}function v(a){for(;"	"===a.text[0]||" "===a.text[0];)e(a,1)}function w(a){for(var b=0;"	"===a.text[0]||" "===a.text[0];)e(a,1),b+=1;0===b&&(a.error="Missing space.")}function x(a){var b=a.text.indexOf("\n");-1===b?a.error="Missing EOL.":e(a,b+1)}function y(b){for(;b.text.length>0;){var c=g(b);if(0!==a.trim(c).length)break;f(b)}}function z(b){for(var c=0;b.text.length>0;){var d=g(b);if(0!==a.trim(d).length)break;f(b),c+=1}0===c&&(b.error="Missing empty line.")}function A(a){var b=j(a.text);if(-1===b)return void a.error("Missing timing.");var c=e(a,b),d=/((\d\d):)?((\d\d):)(\d\d).(\d\d\d)|(\d+).(\d\d\d)/.exec(c);if(!d)return void(a.error="Unable to parse timestamp.");var f=0,g=d[2],h=d[4];if(h){if(parseInt(h,10)>59)return void(a.error="Invalid minute range.");g&&(f+=3600*parseInt(g,10)),f+=60*parseInt(h,10);var i=d[5];if(parseInt(i,10)>59)return void(a.error="Invalid second range.");f+=parseInt(i,10),f+=parseInt(d[6],10)/1e3}else f+=parseInt(d[7],10),f+=parseInt(d[8],10)/1e3;return f}AblePlayer.prototype.parseWebVTT=function(a){a=a.replace(/(\r\n|\n|\r)/g,"\n");var b={text:a,error:null,metadata:{},cues:[],line:1,column:1};try{c(b,h)}catch(d){}return b}}(jQuery),function(a){AblePlayer.prototype.injectPlayerCode=function(){if(this.$mediaContainer=this.$media.wrap('<div class="able-media-container"></div>').parent(),this.$ableDiv=this.$mediaContainer.wrap('<div class="able"></div>').parent(),this.$mediaContainer.width(this.playerWidth),"video"==this.mediaType&&this.$mediaContainer.height(this.playerHeight),this.$ableDiv.width(this.playerWidth),this.injectOffscreenHeading(),"video"===this.mediaType&&"youtube"!==this.player){this.injectBigPlayButton();var b=a("<div>",{"class":"able-vidcap-container"});this.$vidcapContainer=this.$mediaContainer.wrap(b).parent()}this.injectPlayerControlArea(),this.injectTextDescriptionArea(),this.includeTranscript&&(this.injectTranscriptArea(),this.addTranscriptAreaEvents()),this.injectAlert(),this.injectPlaylist(),this.injectPrefsForm()},AblePlayer.prototype.injectOffscreenHeading=function(){var b,c=this.$ableDiv.parents();if(c.each(function(){var c=a(this),d=c.find("h1, h2, h3, h4, h5, h6"),e=d.length;return e?(b=d.eq(e-1).prop("tagName"),!1):void 0}),"undefined"==typeof b)var b="h1";else{var d=parseInt(b[1]);d+=1,d>6&&(d=6),b="h"+d.toString()}this.playerHeadingLevel=d,this.$headingDiv=a("<"+b+">"),this.$ableDiv.prepend(this.$headingDiv),this.$headingDiv.addClass("able-offscreen"),this.$headingDiv.text(this.tt.playerHeading)},AblePlayer.prototype.injectBigPlayButton=function(){this.$bigPlayButton=a("<button>",{"class":"able-big-play-button icon-play","aria-hidden":!0,tabindex:-1});var b=this;this.$bigPlayButton.click(function(){b.handlePlay()}),this.$mediaContainer.prepend(this.$bigPlayButton)},AblePlayer.prototype.injectPlayerControlArea=function(){this.$playerDiv=a("<div>",{"class":"able-player",role:"region","aria-label":this.mediaType+" player"}),this.$playerDiv.addClass("able-"+this.mediaType),this.$nowPlayingDiv=a("<div>",{"class":"able-now-playing",role:"alert"}),this.$controllerDiv=a("<div>",{"class":"able-controller"}),this.$controllerDiv.addClass("able-"+this.iconColor+"-controls"),this.$statusBarDiv=a("<div>",{"class":"able-status-bar"}),this.$timer=a("<span>",{"class":"able-timer"}),this.$elapsedTimeContainer=a("<span>",{"class":"able-elapsedTime",text:"0:00"}),this.$durationContainer=a("<span>",{"class":"able-duration"}),this.$timer.append(this.$elapsedTimeContainer).append(this.$durationContainer),this.$speed=a("<span>",{"class":"able-speed",role:"alert"}).text(this.tt.speed+": 1x"),this.$status=a("<span>",{"class":"able-status",role:"alert"}),this.$statusBarDiv.append(this.$timer,this.$speed,this.$status),this.$playerDiv.append(this.$nowPlayingDiv,this.$controllerDiv,this.$statusBarDiv),this.$ableDiv.append(this.$playerDiv)},AblePlayer.prototype.injectTextDescriptionArea=function(){this.$descDiv=a("<div>",{"class":"able-descriptions",role:"alert"}),this.$descDiv.hide(),(0===this.prefClosedDesc||0===this.prefVisibleDesc)&&this.$descDiv.addClass("able-clipped"),this.$ableDiv.append(this.$descDiv)},AblePlayer.prototype.injectTranscriptArea=function(){this.$transcriptArea=a("<div>",{"class":"able-transcript-area"}),this.$transcriptToolbar=a("<div>",{"class":"able-transcript-toolbar"}),this.$transcriptDiv=a("<div>",{"class":"able-transcript"}),this.$autoScrollTranscriptCheckbox=a('<input id="autoscroll-transcript-checkbox" type="checkbox">'),this.$transcriptToolbar.append(a('<label for="autoscroll-transcript-checkbox">'+this.tt.autoScroll+": </label>"),this.$autoScrollTranscriptCheckbox),this.$transcriptLanguageSelect=a('<select id="transcript-language-select">'),this.$unknownTranscriptOption=a('<option val="unknown">'+this.tt.unknown+"</option>"),this.$transcriptLanguageSelect.append(this.$unknownTranscriptOption),this.$transcriptLanguageSelect.prop("disabled",!0);var b=a('<div style="float: right;">');this.$transcriptLanguageSelectContainer=b,b.append(a('<label for="transcript-language-select">'+this.tt.language+": </label>"),this.$transcriptLanguageSelect),this.$transcriptToolbar.append(b),this.$transcriptArea.append(this.$transcriptToolbar,this.$transcriptDiv),this.transcriptDivLocation?a("#"+this.transcriptDivLocation).append(this.$transcriptArea):this.$ableColumnRight?this.$ableColumnRight.prepend(this.$transcriptArea):this.splitPlayerIntoColumns("transcript"),this.prefTranscript||this.transcriptDivLocation||this.$transcriptArea.hide()},AblePlayer.prototype.splitPlayerIntoColumns=function(a){this.$ableColumnLeft=this.$ableDiv.wrap('<div class="able-column-left">').parent(),this.$ableColumnLeft.width(this.playerWidth),"transcript"===a?(this.$transcriptArea.insertAfter(this.$ableColumnLeft),this.$ableColumnRight=this.$transcriptArea.wrap('<div class="able-column-right">').parent()):"sign"==a&&(this.$signArea.insertAfter(this.$ableColumnLeft),this.$ableColumnRight=this.$signArea.wrap('<div class="able-column-right">').parent()),this.$ableColumnRight.width(this.playerWidth)},AblePlayer.prototype.injectAlert=function(){this.alertBox=a('<div role="alert"></div>'),this.alertBox.addClass("able-alert"),this.alertBox.appendTo(this.$ableDiv),this.alertBox.css({top:this.$mediaContainer.offset().top})},AblePlayer.prototype.injectPlaylist=function(){if(this.playlistEmbed===!0){var a=this.$playlistDom.clone();a.insertBefore(this.$statusBarDiv),this.$playlist=a.find("li")}this.hasPlaylist&&0===this.$sources.length&&(this.initializing=!0,this.swapSource(0),this.$sources=this.$media.find("source"),this.debug)},AblePlayer.prototype.addTranscriptAreaEvents=function(){var a=this;this.$autoScrollTranscriptCheckbox.click(function(){a.handleTranscriptLockToggle(a.$autoScrollTranscriptCheckbox.prop("checked"))}),this.$transcriptDiv.bind("mousewheel DOMMouseScroll click scroll",function(){a.scrollingTranscript||(a.autoScrollTranscript=!1,a.refreshControls()),a.scrollingTranscript=!1}),this.$transcriptLanguageSelect.change(function(){var b=a.$transcriptLanguageSelect.val();for(var c in a.captions)a.captions[c].language===b&&(a.transcriptCaptions=a.captions[c]);for(var c in a.descriptions)a.descriptions[c].language===b&&(a.transcriptDescriptions=a.descriptions[c]);a.updateTranscript()})},AblePlayer.prototype.createPopup=function(b){var c,d,e,f,g,h;return c=this,d=a("<div>",{id:this.mediaId+"-"+b+"-menu","class":"able-popup"}),d.on("keydown",function(b){e=a(this).find("input:focus"),f=e.parent(),f.is(":first-child")?(g=a(this).find("input").last(),h=f.next().find("input")):f.is(":last-child")?(g=f.prev().find("input"),h=a(this).find("input").first()):(g=f.prev().find("input"),h=f.next().find("input")),9===b.which?b.shiftKey?(f.removeClass("able-focus"),g.focus(),g.parent().addClass("able-focus")):(f.removeClass("able-focus"),h.focus(),h.parent().addClass("able-focus")):40===b.which||39===b.which?(f.removeClass("able-focus"),h.focus(),h.parent().addClass("able-focus")):38==b.which||37===b.which?(f.removeClass("able-focus"),g.focus(),g.parent().addClass("able-focus")):32===b.which||13===b.which?a("input:focus").click():27===b.which&&(f.removeClass("able-focus"),c.closePopups()),b.preventDefault()}),this.$controllerDiv.append(d),d},AblePlayer.prototype.closePopups=function(){this.chaptersPopup&&this.chaptersPopup.is(":visible")&&(this.chaptersPopup.hide(),this.$chaptersButton.focus()),this.captionsPopup&&this.captionsPopup.is(":visible")&&(this.captionsPopup.hide(),this.$ccButton.focus()),this.$windowPopup&&this.$windowPopup.is(":visible")&&(this.$windowPopup.hide(),this.$windowButton.show().focus())},AblePlayer.prototype.setupPopups=function(){var b,c,d,e,f,g,h,i,j,k,l,m,n;if(b=[],this.captions.length>0&&b.push("captions"),this.chapters.length>0&&b.push("chapters"),b.length>0){c=this;for(var e=0;e<b.length;e++){var o=b[e];d=!1,"captions"==o?(this.captionsPopup=this.createPopup("captions"),g=this.captions):"chapters"==o&&(this.chaptersPopup=this.createPopup("chapters"),g=this.chapters);var h=a("<ul></ul>");k=this.mediaId+"-"+o+"-choice";for(f in g){if(i=a("<li></li>"),j=g[f],l=this.mediaId+"-"+o+"-"+f,m=a("<input>",{type:"radio",val:f,name:k,id:l}),j.def&&(m.attr("checked","checked"),d=!0),n=a("<label>",{"for":l}),"undefined"!==j.language&&m.attr("lang",j.language),"captions"==o)n.text(j.label||j.language),m.click(this.getCaptionClickFunction(j));else if("chapters"==o){n.text(this.flattenCueForCaption(j)+" - "+this.formatSecondsAsColonTime(j.start));var p=function(a){return function(){c.seekTo(a),c.hidingPopup=!0,c.chaptersPopup.hide(),c.$chaptersButton.focus()}};m.on("click keypress",p(j.start))}i.append(m,n),h.append(i)}"captions"==o&&(l=this.mediaId+"-captions-off",i=a("<li></li>"),m=a("<input>",{type:"radio",name:k,id:l}),n=a("<label>",{"for":l}),n.text(this.tt.captionsOff),m.click(this.getCaptionOffFunction()),i.append(m,n),h.append(i)),d||h.find("input").first().attr("checked","checked"),"captions"==o?this.captionsPopup.append(h):"chapters"==o&&this.chaptersPopup.append(h)}}},AblePlayer.prototype.provideFallback=function(b){var c,d,e,f,g,h,i,j,k,l;if(c=this.$media.find("div,p,ul"),f=!1,0===c.length&&("No Support"!==b&&"undefined"!=typeof b?c=a("<p>").text(b):(d=this.tt.fallbackError1+" "+this.tt[this.mediaType]+". ",d+=this.tt.fallbackError2+":",c=a("<p>").text(d),f=!0)),e=a("<div>",{"class":"able-fallback",role:"alert",width:this.playerWidth}),this.$media.before(e),e.html(c),f){for(j=a("<ul>"),g=this.getSupportingBrowsers(),h=0;h<g.length;h++)i=a("<li>"),i.text(g[h].name+" "+g[h].minVersion+" "+this.tt.orHigher),j.append(i);e.append(j)}if(this.$media.attr("poster")){k=this.$media.attr("poster");var l=a("<img>",{src:k,alt:"",role:"presentation"});
e.append(l)}this.$media.remove()},AblePlayer.prototype.getSupportingBrowsers=function(){var a=[];return a[0]={name:"Chrome",minVersion:"31"},a[1]={name:"Firefox",minVersion:"34"},a[2]={name:"Internet Explorer",minVersion:"10"},a[3]={name:"Opera",minVersion:"26"},a[4]={name:"Safari for Mac OS X",minVersion:"7.1"},a[5]={name:"Safari for iOS",minVersion:"7.1"},a[6]={name:"Android Browser",minVersion:"4.1"},a[7]={name:"Chrome for Android",minVersion:"40"},a},AblePlayer.prototype.addHelp=function(){var b,c,d,e,f,g,h,i,j;for(b=a("<div></div>",{"class":"able-help-div"}),c=a("<div></div>"),d=a("<p></p>").text(this.tt.helpKeys),e=a("<p></p>").text(this.tt.helpKeysDisclaimer),f="<ul>\n",g=0;g<this.controls.length;g++)"play"===this.controls[g]?(h=this.tt.play+"/"+this.tt.pause,i="p </span><em>"+this.tt.or+'</em><span class="able-help-modifiers"> '+this.tt.spacebar):"stop"===this.controls[g]?(h=this.tt.stop,i="s"):"rewind"===this.controls[g]?(h=this.tt.rewind,i="r"):"forward"===this.controls[g]?(h=this.tt.forward,i="f"):"mute"===this.controls[g]?(h=this.tt.mute,i="m"):"volumeUp"===this.controls[g]?(h=this.tt.volumeUp,i="u </b><em>"+this.tt.or+"</em><b> 1-5"):"volumeDown"===this.controls[g]?(h=this.tt.volumeDown,i="d </b><em>"+this.tt.or+"</em><b> 1-5"):"captions"===this.controls[g]?(h=this.captions.length>1?this.tt.captions:this.captionsOn?this.tt.hideCaptions:this.tt.showCaptions,i="c"):"descriptions"===this.controls[g]?(h=this.descOn?this.tt.turnOffDescriptions:this.tt.turnOnDescriptions,i="n"):"prefs"===this.controls[g]?(h=this.tt.preferences,i="t"):"help"===this.controls[g]?(h=this.tt.help,i="h"):h=!1,h&&(f+='<li><span class="able-help-modifiers">',1===this.prefAltKey&&(f+=this.tt.prefAltKey+" + "),1===this.prefCtrlKey&&(f+=this.tt.prefCtrlKey+" + "),1===this.prefShiftKey&&(f+=this.tt.prefShiftKey+" + "),f+=i+"</span> = "+h+"</li>\n");f+="</ul>\n",c.append(d,f,e),b.append(c),a("body").append(b);var k=new AccessibleDialog(b,"alertdialog",this.tt.helpTitle,c,this.tt.closeButtonLabel,"40em");b.append("<hr>"),j=a("<button>"+this.tt.ok+"</button>"),j.click(function(){k.hide()}),b.append(j),this.helpDialog=k},AblePlayer.prototype.calculateControlLayout=function(){var a={ul:["play","stop"],ur:[],bl:[],br:[]};this.useSlider&&(a.ur.push("rewind"),a.ur.push("seek"),a.ur.push("forward"));var b=[];this.browserSupportsVolume()&&(b.push("mute"),b.push("volume-up"),b.push("volume-down"));var c=[];return"video"===this.mediaType&&(this.hasCaptions&&c.push("captions"),this.hasSignLanguage&&c.push("sign"),(this.hasOpenDesc||this.hasClosedDesc)&&c.push("descriptions")),this.includeTranscript&&this.useTranscriptButton&&c.push("transcript"),this.isPlaybackRateSupported()&&(c.push("slower"),c.push("faster")),"video"===this.mediaType&&this.hasChapters&&c.push("chapters"),b.length>0&&c.length>0?(a.bl=b,a.bl.push("pipe"),a.bl=a.bl.concat(c)):a.bl=b.concat(c),a.br.push("preferences"),a.br.push("help"),"video"===this.mediaType&&"jw"!==this.player&&a.br.push("fullscreen"),a},AblePlayer.prototype.addControls=function(){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q=100,r=this.calculateControlLayout(),s={0:"ul",1:"ur",2:"bl",3:"br"};for(f=this.mediaId+"-tooltip",g=a("<div>",{id:f,"class":"able-tooltip"}),this.$controllerDiv.append(g),b=0;3>=b;b++){for(d=r[s[b]],e=b%2===0?a("<span>",{"class":"able-left-controls"}):a("<span>",{"class":"able-right-controls"}),this.$controllerDiv.append(e),c=0;c<d.length;c++)if(h=d[c],"seek"===h){var t=a('<div class="able-seekbar"></div>');e.append(t),this.seekBar=new AccessibleSeekBar(t,q)}else if("pipe"===h){var u=a("<span>",{tabindex:"-1","aria-hidden":"true"});if("font"===this.iconType)u.addClass("icon-pipe");else{var v=a("<img>",{src:"../images/"+this.iconColor+"/pipe.png",alt:"",role:"presentation"});u.append(v)}e.append(u)}else{j="mute"===h?"../images/"+this.iconColor+"/volume-mute.png":"fullscreen"===h?"../images/"+this.iconColor+"/fullscreen-expand.png":"../images/"+this.iconColor+"/"+h+".png",k=this.getButtonTitle(h),l=a("<button>",{type:"button",tabindex:"0","aria-label":k,"class":"able-button-handler-"+h}),"font"===this.iconType?(m="icon-"+h,n=a("<span>",{"class":m,"aria-hidden":"true"}),l.append(n)):(i=a("<img>",{src:j,alt:"",role:"presentation"}),l.append(i));var w=a("<span>",{"class":"able-clipped"}).text(k);l.append(w),l.on("mouseenter focus",function(){var b=a(this).attr("aria-label"),c=a(this).position(),d=a(this).height(),e=(a(this).width(),c.top-d-15),g=!0;if(a(this).closest("span").hasClass("able-right-controls")){if(a(this).is(":last-child")){g=!1;var h=0,i={left:"",right:h+"px",top:e+"px"}}}else if(a(this).is(":first-child")){g=!1;var h=c.left,i={left:h+"px",right:"",top:e+"px"}}if(g)var j=a("#"+f).text(b).width(),h=c.left-j/2,i={left:h+"px",right:"",top:e+"px"};a("#"+f).text(b).css(i).show().delay(4e3).fadeOut(1e3),a(this).on("mouseleave blur",function(){a("#"+f).text("").hide()})}),"captions"===h?this.prefCaptions&&1===this.prefCaptions||(p=this.captions.length>1?this.tt.captions:this.tt.showCaptions,l.addClass("buttonOff").attr("title",p)):"descriptions"===h&&(this.prefDesc&&1===this.prefDesc||l.addClass("buttonOff").attr("title",this.tt.turnOnDescriptions)),e.append(l),"play"===h?this.$playpauseButton=l:"captions"===h?this.$ccButton=l:"sign"===h?this.$signButton=l:"descriptions"===h?(this.$descButton=l,this.descOn||this.$descButton.addClass("buttonOff").attr("title",this.tt.turnOnDescriptions)):"mute"===h?this.$muteButton=l:"transcript"===h?this.$transcriptButton=l:"fullscreen"===h?this.$fullscreenButton=l:"chapters"===h&&(this.$chaptersButton=l)}b%2==1&&this.$controllerDiv.append('<div style="clear:both;"></div>')}"video"===this.mediaType&&(o={width:this.playerWidth+"px",height:this.playerHeight+"px"},this.$vidcapContainer&&this.$vidcapContainer.css(o),this.$captionDiv&&this.$captionDiv.css("width",this.playerWidth+"px"),this.$descDiv&&this.$descDiv.css("width",this.playerWidth+"px")),this.controls=[];for(var x in r)this.controls=this.controls.concat(r[x]);this.addHelp(),this.refreshControls()},AblePlayer.prototype.swapSource=function(b){var c,d,e,f,g,h,i,j,k;for(this.$media.find("source").remove(),c=this.$playlist.eq(b),d=c.html(),c.attr("lang")&&(e=c.attr("lang")),f=[],g=0,"audio"===this.mediaType?(c.attr("data-mp3")&&(h=c.attr("data-mp3"),f[g]=new Array("audio/mpeg",h),g++),c.attr("data-webm")&&(f[g]=new Array("audio/webm",c.attr("data-webm")),g++),c.attr("data-webma")&&(f[g]=new Array("audio/webm",c.attr("data-webma")),g++),c.attr("data-ogg")&&(f[g]=new Array("audio/ogg",c.attr("data-ogg")),g++),c.attr("data-oga")&&(f[g]=new Array("audio/ogg",c.attr("data-oga")),g++),c.attr("data-wav")&&(f[g]=new Array("audio/wav",c.attr("data-wav")),g++)):"video"===this.mediaType&&(c.attr("data-mp4")&&(h=c.attr("data-mp4"),f[g]=new Array("video/mp4",h),g++),c.attr("data-webm")&&(f[g]=new Array("video/webm",c.attr("data-webm")),g++),c.attr("data-webmv")&&(f[g]=new Array("video/webm",c.attr("data-webmv")),g++),c.attr("data-ogg")&&(f[g]=new Array("video/ogg",c.attr("data-ogg")),g++),c.attr("data-ogv")&&(f[g]=new Array("video/ogg",c.attr("data-ogv")),g++)),i=0;i<f.length;i++)j=a("<source>",{type:f[i][0],src:f[i][1]}),this.$media.append(j);this.$playlist.removeClass("able-current"),c.addClass("able-current"),this.showNowPlaying===!0&&(k=a("<span>"),"undefined"!=typeof e&&k.attr("lang",e),k.html("<span>Selected track:</span>"+d),this.$nowPlayingDiv.html(k)),this.initializing?this.swappingSrc=!1:(this.swappingSrc=!0,"html5"===this.player?this.media.load():"jw"===this.player?this.jwPlayer.load({file:h}):"youtube"===this.player)},AblePlayer.prototype.getButtonTitle=function(a){return"playpause"===a?this.tt.play:"play"===a?this.tt.play:"pause"===a?this.tt.pause:"stop"===a?this.tt.stop:"rewind"===a?this.tt.rewind:"forward"===a?this.tt.forward:"captions"===a?this.captionsOn?this.tt.hideCaptions:this.tt.showCaptions:"descriptions"===a?this.descOn?this.tt.turnOffDescriptions:this.tt.turnOnDescriptions:"transcript"===a?this.$transcriptDiv.is(":visible")?this.tt.hideTranscript:this.tt.showTranscript:"chapters"===a?this.tt.chapters:"sign"===a?this.tt.sign:"mute"===a?this.getVolume()>0?this.tt.mute:this.tt.unmute:"volume-up"===a?this.tt.volumeUp:"volume-down"===a?this.tt.volumeDown:"faster"===a?this.tt.faster:"slower"===a?this.tt.slower:"preferences"===a?this.tt.preferences:"help"===a?this.tt.help:(this.debug,a.charAt(0).toUpperCase()+a.slice(1))}}(jQuery),function(a){AblePlayer.prototype.setupTracks=function(){var b=new a.Deferred,c=b.promise();this.$tracks=this.$media.find("track"),this.captions=[],this.captionLabels=[],this.descriptions=[],this.chapters=[],this.meta=[];for(var d=[],e=0;e<this.$tracks.length;e++){{var f=this.$tracks[e],g=f.getAttribute("kind"),h=f.getAttribute("src");f.getAttribute("default")}if(h){var i=this.loadTextObject(h),j=this;d.push(i),i.then(function(a,b){return function(c){var d=j.parseWebVTT(c).cues;"captions"===b||"subtitles"===b?j.setupCaptions(a,d):"descriptions"===b?j.setupDescriptions(a,d):"chapters"===b?j.setupChapters(a,d):"metadata"===b&&j.setupMetadata(a,d)}}(f,g))}}return a.when.apply(a,d).then(function(){b.resolve()}),c},AblePlayer.prototype.setupCaptions=function(b,c){this.hasCaptions=!0;var d=b.getAttribute("srclang")||this.lang,e=b.getAttribute("label")||d;if("string"==typeof b.getAttribute("default")){var f=!0;b.removeAttribute("default")}else var f=!1;if("video"===this.mediaType&&(this.$captionDiv||(this.$captionDiv=a("<div>",{"class":"able-captions","aria-hidden":"true"}),this.$vidcapContainer.append(this.$captionDiv))),this.currentCaption=-1,this.captionsOn=1===this.prefCaptions?!0:!1,this.includeTranscript){this.$unknownTranscriptOption&&(this.$unknownTranscriptOption.remove(),this.$unknownTranscriptOption=null);var g=a("<option></option>",{value:d,lang:d}).text(e)}if(this.includeTranscript)var h=this.$transcriptLanguageSelect.find("option");if(0===this.captions.length)this.captions.push({cues:c,language:d,label:e,def:f}),this.includeTranscript&&(f&&g.attr("selected","selected"),this.$transcriptLanguageSelect.append(g)),this.captionLabels.push(e);else{for(var i=!1,j=0;j<this.captions.length;j++){{this.captionLabels[j]}if(e.toLowerCase()<this.captionLabels[j].toLowerCase()){this.captions.splice(j,0,{cues:c,language:d,label:e,def:f}),this.includeTranscript&&(f&&g.attr("selected","selected"),g.insertBefore(h.eq(j))),this.captionLabels.splice(j,0,e),i=!0;break}}i||(this.captions.push({cues:c,language:d,label:e,def:f}),this.includeTranscript&&(f&&g.attr("selected","selected"),this.$transcriptLanguageSelect.append(g)),this.captionLabels.push(e))}this.includeTranscript&&this.$transcriptLanguageSelect.find("option").length>1&&this.$transcriptLanguageSelect.prop("disabled",!1)},AblePlayer.prototype.setupDescriptions=function(a,b){var c=a.getAttribute("srclang");this.descOn=!1,this.hasClosedDesc=!0,this.currentDescription=-1,1===this.prefDesc&&1===this.prefClosedDesc&&(this.descOn=!0),this.descriptions.push({cues:b,language:c})},AblePlayer.prototype.setupChapters=function(a,b){this.hasChapters=!0,this.chapters=b},AblePlayer.prototype.setupMetadata=function(b,c){this.metaDiv&&a("#"+this.metaDiv)&&(this.$metaDiv=a("#"+this.metaDiv),this.hasMeta=!0),this.meta=c},AblePlayer.prototype.loadTextObject=function(b){var c=new a.Deferred,d=c.promise(),e=this,f=a("<div>",{style:"display:none"});return f.load(b,function(a,b){"error"===b?(e.debug,c.fail()):c.resolve(a),f.remove()}),d}}(jQuery),function(a){window.AccessibleSeekBar=function(b,c){var d=this;this.position=0,this.tracking=!1,this.trackDevice=null,this.keyTrackPosition=0,this.lastTrackPosition=0,this.nextStep=1,this.inertiaCount=0,this.bodyDiv=a(b),this.loadedDiv=a("<div></div>"),this.playedDiv=a("<div></div>"),this.seekHead=a('<div class="able-seek-head"></div>'),this.seekHead.attr("tabindex","0"),this.seekHead.attr("role","slider"),this.seekHead.attr("aria-value-min",0),this.timeTooltip=a("<div>"),this.bodyDiv.append(this.timeTooltip),this.timeTooltip.attr("role","tooltip"),this.timeTooltip.addClass("able-tooltip"),this.bodyDiv.append(this.loadedDiv),this.bodyDiv.append(this.playedDiv),this.bodyDiv.append(this.seekHead),this.bodyDiv.wrap("<div></div>"),this.wrapperDiv=this.bodyDiv.parent(),this.wrapperDiv.width(c),this.wrapperDiv.addClass("able-seekbar-wrapper"),this.loadedDiv.width(0),this.loadedDiv.addClass("able-seekbar-loaded"),this.playedDiv.width(0),this.playedDiv.addClass("able-seekbar-played");var e="0.8em";this.seekHead.addClass("able-seekhead").css({height:e,width:e,"border-radius":e,"-webkit-border-radius":e,"-moz-border-radius":e,"-o-border-radius":e}),this.setDuration(100),this.seekHead.hover(function(){d.overHead=!0,d.refreshTooltip()},function(a){d.overHead=!1,!d.overBody&&d.tracking&&"mouse"===d.trackDevice&&d.stopTracking(d.pageXToPosition(a.pageX)),d.refreshTooltip()}),this.seekHead.mousemove(function(a){d.tracking&&"mouse"===d.trackDevice&&d.trackHeadAtPageX(a.pageX)}),this.bodyDiv.hover(function(){d.overBody=!0,d.refreshTooltip()},function(a){d.overBody=!1,d.overBodyMousePos=null,d.refreshTooltip(),!d.overHead&&d.tracking&&"mouse"===d.trackDevice&&d.stopTracking(d.pageXToPosition(a.pageX))}),this.bodyDiv.mousemove(function(a){d.overBodyMousePos={x:a.pageX,y:a.pageY},d.tracking&&"mouse"===d.trackDevice&&d.trackHeadAtPageX(a.pageX),d.refreshTooltip()}),this.bodyDiv.mousedown(function(a){d.startTracking("mouse",d.pageXToPosition(a.pageX)),d.trackHeadAtPageX(a.pageX),d.seekHead.is(":focus")||d.seekHead.focus(),a.preventDefault()}),this.seekHead.mousedown(function(a){d.startTracking("mouse",d.pageXToPosition(d.seekHead.offset()+d.seekHead.width()/2)),d.bodyDiv.is(":focus")||d.bodyDiv.focus(),a.preventDefault()}),this.bodyDiv.mouseup(function(a){d.tracking&&"mouse"===d.trackDevice&&d.stopTracking(d.pageXToPosition(a.pageX))}),this.seekHead.mouseup(function(a){d.tracking&&"mouse"===d.trackDevice&&d.stopTracking(d.pageXToPosition(a.pageX))}),this.bodyDiv.keydown(function(a){if(36===a.which)d.trackImmediatelyTo(0);else if(35===a.which)d.trackImmediatelyTo(d.duration);else if(37===a.which||40===a.which)d.arrowKeyDown(-1);else{if(39!==a.which&&38!==a.which)return;d.arrowKeyDown(1)}a.preventDefault()}),this.bodyDiv.keyup(function(a){(35===a.which||36===a.which||37===a.which||38===a.which||39===a.which||40===a.which)&&(d.tracking&&"keyboard"===d.trackDevice&&d.stopTracking(d.keyTrackPosition),a.preventDefault())})},AccessibleSeekBar.prototype.arrowKeyDown=function(a){this.tracking&&"keyboard"===this.trackDevice?(this.keyTrackPosition=this.boundPos(this.keyTrackPosition+this.nextStep*a),this.inertiaCount+=1,20===this.inertiaCount&&(this.inertiaCount=0,this.nextStep*=2),this.trackHeadAtPosition(this.keyTrackPosition)):(this.nextStep=1,this.inertiaCount=0,this.keyTrackPosition=this.boundPos(this.position+this.nextStep*a),this.startTracking("keyboard",this.keyTrackPosition),this.trackHeadAtPosition(this.keyTrackPosition))},AccessibleSeekBar.prototype.pageXToPosition=function(a){var b=a-this.bodyDiv.offset().left,c=this.duration*(b/this.bodyDiv.width());return this.boundPos(c)},AccessibleSeekBar.prototype.boundPos=function(a){return Math.max(0,Math.min(a,this.duration))},AccessibleSeekBar.prototype.setDuration=function(a){a!==this.duration&&(this.duration=a,this.resetHeadLocation(),this.seekHead.attr("aria-value-max",a))},AccessibleSeekBar.prototype.setWidth=function(a){this.wrapperDiv.width(a),this.resizeDivs(),this.resetHeadLocation()},AccessibleSeekBar.prototype.getWidth=function(){return this.wrapperDiv.width()},AccessibleSeekBar.prototype.resizeDivs=function(){this.playedDiv.width(this.bodyDiv.width()*(this.position/this.duration)),this.loadedDiv.width(this.bodyDiv.width()*this.buffered)},AccessibleSeekBar.prototype.resetHeadLocation=function(){var a=this.position/this.duration,b=this.bodyDiv.width()*a;this.seekHead.css("left",b-this.seekHead.width()/2),this.tracking&&this.stopTracking(this.position)},AccessibleSeekBar.prototype.setPosition=function(a,b){this.position=a,this.resetHeadLocation(),this.refreshTooltip(),this.resizeDivs(),this.updateAriaValues(a,b)},AccessibleSeekBar.prototype.setBuffered=function(a){this.buffered=a,this.redrawDivs},AccessibleSeekBar.prototype.startTracking=function(a,b){this.tracking||(this.trackDevice=a,this.tracking=!0,this.bodyDiv.trigger("startTracking",[b]))},AccessibleSeekBar.prototype.stopTracking=function(a){this.trackDevice=null,this.tracking=!1,this.bodyDiv.trigger("stopTracking",[a]),this.setPosition(a,!0)},AccessibleSeekBar.prototype.trackHeadAtPageX=function(a){var b=this.pageXToPosition(a),c=a-this.bodyDiv.offset().left-this.seekHead.width()/2;c=Math.max(0,Math.min(c,this.bodyDiv.width()-this.seekHead.width())),this.lastTrackPosition=b,this.seekHead.css("left",c),this.reportTrackAtPosition(b)},AccessibleSeekBar.prototype.trackHeadAtPosition=function(a){var b=a/this.duration,c=this.bodyDiv.width()*b;this.lastTrackPosition=a,this.seekHead.css("left",c-this.seekHead.width()/2),this.reportTrackAtPosition(a)},AccessibleSeekBar.prototype.reportTrackAtPosition=function(a){this.bodyDiv.trigger("tracking",[a]),this.updateAriaValues(a,!0)},AccessibleSeekBar.prototype.updateAriaValues=function(b,c){var d,e=Math.floor(b/3600),f=Math.floor(b%3600/60),g=Math.floor(b%60),h=1===f?"minute":"minutes",i=1===g?"second":"seconds";d=e>0?e+" "+pHourword+", "+f+" "+h+", "+g+" "+i:f>0?f+" "+h+", "+g+" "+i:g+" "+i,this.liveAriaRegion||(this.liveAriaRegion=a("<span>",{"class":"able-offscreen","aria-live":"polite"}),this.wrapperDiv.append(this.liveAriaRegion)),c&&this.liveAriaRegion.text()!==d&&this.liveAriaRegion.text(d)},AccessibleSeekBar.prototype.trackImmediatelyTo=function(a){this.startTracking("keyboard",a),this.trackHeadAtPosition(a),this.keyTrackPosition=a},AccessibleSeekBar.prototype.refreshTooltip=function(){this.overHead?(this.timeTooltip.show(),this.timeTooltip.text(this.tracking?this.positionToStr(this.lastTrackPosition):this.positionToStr(this.position)),this.setTooltipPosition(this.seekHead.position().left+this.seekHead.width()/2)):this.overBody&&this.overBodyMousePos?(this.timeTooltip.show(),this.timeTooltip.text(this.positionToStr(this.pageXToPosition(this.overBodyMousePos.x))),this.setTooltipPosition(this.overBodyMousePos.x-this.bodyDiv.offset().left)):this.timeTooltip.hide()},AccessibleSeekBar.prototype.setTooltipPosition=function(a){this.timeTooltip.css({left:a-this.timeTooltip.width()/2-10,bottom:this.seekHead.height()+10})},AccessibleSeekBar.prototype.positionToStr=function(a){var b=Math.floor(a/60),c=Math.floor(a%60);return 10>c&&(c="0"+c),b+":"+c}}(jQuery),function(a){var b="a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]";window.AccessibleDialog=function(c,d,e,f,g,h,i,j){this.title=e,this.closeButtonLabel=g,this.escapeHook=j,this.baseId=a(c).attr("id")||Math.floor(1e9*Math.random()).toString();var k=this,l=c;if(this.modal=l,l.css({width:h||"50%",top:i?"0":"25%"}),l.addClass("modalDialog"),!i){var m=a("<button>",{"class":"modalCloseButton",title:k.closeButtonLabel,"aria-label":k.closeButtonLabel}).text("X");m.keydown(function(a){32===a.which&&k.hide()}).click(function(){k.hide()});var n=a("<h1></h1>");n.attr("id","modalTitle-"+this.baseId),n.css("text-align","center"),n.text(e),f.attr("id","modalDesc-"+this.baseId),l.attr({"aria-labelledby":"modalTitle-"+this.baseId,"aria-describedby":"modalDesc-"+this.baseId}),l.prepend(n),l.prepend(m)}l.attr({"aria-hidden":"true",role:d}),l.keydown(function(c){if(27===c.which)k.escapeHook?k.escapeHook(c,this):(k.hide(),c.preventDefault());else if(9===c.which){var d=l.find("*"),e=d.filter(b).filter(":visible");if(0===e.length)return;var f=a(":focus"),g=e.index(f);c.shiftKey?0===g&&(e.get(e.length-1).focus(),c.preventDefault()):g===e.length-1&&(e.get(0).focus(),c.preventDefault())}c.stopPropagation()}),a("body > *").not(".modalOverlay").not(".modalDialog").attr("aria-hidden","false")},AccessibleDialog.prototype.show=function(){if(!this.overlay){var c=a("<div></div>").attr({"class":"modalOverlay",tabindex:"-1"});this.overlay=c,a("body").append(c),c.on("mousedown.accessibleModal",function(a){a.preventDefault()})}a("body > *").not(".modalOverlay").not(".modalDialog").attr("aria-hidden","true"),this.overlay.css("display","block"),this.modal.css("display","block"),this.modal.attr({"aria-hidden":"false",tabindex:"-1"}),this.focusedElementBeforeModal=a(":focus");var d=this.modal.find("*").filter(b).filter(":visible");0===d.length&&this.focusedElementBeforeModal.blur();var e=this;setTimeout(function(){e.modal.focus()},300)},AccessibleDialog.prototype.hide=function(){this.overlay&&this.overlay.css("display","none"),this.modal.css("display","none"),this.modal.attr("aria-hidden","true"),a("body > *").not(".modalOverlay").not(".modalDialog").attr("aria-hidden","false"),this.focusedElementBeforeModal.focus()}}(jQuery),function(){AblePlayer.prototype.countProperties=function(a){var b,c;b=0;for(c in a)a.hasOwnProperty(c)&&++b;return b},AblePlayer.prototype.formatSecondsAsColonTime=function(a){var b=Math.floor(a/60),c=Math.floor(a%60);return 10>c&&(c="0"+c),b+":"+c}}(jQuery),function(){AblePlayer.prototype.initDescription=function(){this.descFile=this.$sources.first().attr("data-desc-src"),this.descFile?(this.debug,this.hasOpenDesc=!0,this.prefDesc&&(this.descOn=!0)):(this.debug,this.hasOpenDesc=!1),this.updateDescription()},AblePlayer.prototype.updateDescription=function(a){var b;this.descOn?this.prefClosedDesc?(b=!1,this.hasClosedDesc&&(this.prefVisibleDesc?(this.$descDiv.show(),this.$descDiv.removeClass("able-clipped")):(this.$descDiv.hide(),this.$descDiv.addClass("able-clipped")),this.showDescription(a||this.getElapsed()))):b=!0:(this.$descDiv.hide(),b=!1),this.hasOpenDesc&&this.usingAudioDescription()!==b&&this.swapDescription()},AblePlayer.prototype.usingAudioDescription=function(){return this.$sources.first().attr("data-desc-src")===this.$sources.first().attr("src")},AblePlayer.prototype.swapDescription=function(){var a,b,c,d,e,f;if(this.usingAudioDescription()){for(a=0;a<this.$sources.length;a++)b=this.$sources[a].getAttribute("data-orig-src"),d=this.$sources[a].getAttribute("type"),b&&this.$sources[a].setAttribute("src",b),"video/mp4"===d&&(e=a);this.swappingSrc=!0}else{for(a=0;a<this.$sources.length;a++)b=this.$sources[a].getAttribute("src"),c=this.$sources[a].getAttribute("data-desc-src"),d=this.$sources[a].getAttribute("type"),c&&(this.$sources[a].setAttribute("src",c),this.$sources[a].setAttribute("data-orig-src",b)),"video/mp4"===d&&(e=a);this.swappingSrc=this.initializing?!1:!0}"html5"===this.player?this.media.load():"jw"===this.player?(f=this.$sources[e].getAttribute("src"),this.jwPlayer.load({file:f})):"youtube"===this.player},AblePlayer.prototype.showDescription=function(a){var b,c,d,e=function(a){var b=[];if("string"===a.type)b.push(a.value);else for(var c in a.children)b.push(e(a.children[c]));return b.join("")};d=this.selectedDescriptions?this.selectedDescriptions.cues:this.descriptions.length>=1?this.descriptions[0].cues:[];for(b in d)if(d[b].start<=a&&d[b].end>a){c=b;break}"undefined"!=typeof c?this.currentDescription!==c&&(this.$descDiv.html(e(d[c].components)),this.prefDescPause&&this.pauseMedia(),this.currentDescription=c,this.$descDiv.is(":hidden")&&this.$descDiv.show()):(this.$descDiv.html(""),this.currentDescription=-1)}}(jQuery),function(){AblePlayer.prototype.browserSupportsVolume=function(){var a,b;return a=navigator.userAgent.toLowerCase(),b=/ipad|iphone|ipod|android|blackberry|windows ce|windows phone|webos|playbook/.exec(a),b?"android"===b[0]&&/firefox/.test(a)?!0:!1:!0},AblePlayer.prototype.isUserAgent=function(a){var b;return b=navigator.userAgent.toLowerCase(),this.debug,-1!==b.indexOf(a)?!0:!1},AblePlayer.prototype.isIOS=function(a){var b,c;return b=navigator.userAgent.toLowerCase(),c=/ipad|iphone|ipod/.exec(b),c?"undefined"!=typeof a?-1!==b.indexOf("os "+a)?!0:!1:!0:!1},AblePlayer.prototype.nativeFullscreenSupported=function(){return"jw"===this.player?!1:document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled}}(jQuery),function(a){AblePlayer.prototype.seekTo=function(a){if("html5"===this.player){var b;this.startTime=a,b=this.media.seekable,b.length>0&&this.startTime>=b.start(0)&&this.startTime<=b.end(0)&&(this.media.currentTime=this.startTime,this.hasSignLanguage&&this.signVideo&&(this.signVideo.currentTime=this.startTime))}else"jw"===this.player?(this.jwSeekPause=!0,this.jwPlayer.seek(a)):"youtube"===this.player&&this.youtubePlayer.seekTo(a);this.liveUpdatePending=!0,this.refreshControls()},AblePlayer.prototype.getDuration=function(){var a;return"html5"===this.player?a=this.media.duration:"jw"===this.player?a=this.jwPlayer.getDuration():"youtube"===this.player&&(a=this.youtubePlayer.getDuration()),void 0===a||isNaN(a)||-1===a?0:a},AblePlayer.prototype.getElapsed=function(){var a;if("html5"===this.player)a=this.media.currentTime;else if("jw"===this.player){if("IDLE"===this.jwPlayer.getState())return 0;a=this.jwPlayer.getPosition()}else"youtube"===this.player&&(a=this.youtubePlayer.getCurrentTime());return void 0===a||isNaN(a)||-1===a?0:a},AblePlayer.prototype.getPlayerState=function(){if("html5"===this.player)return this.media.paused?0===this.getElapsed()?"stopped":this.media.ended?"ended":"paused":4!==this.media.readyState?"buffering":"playing";if("jw"===this.player){if("PAUSED"===this.jwPlayer.getState()||"IDLE"===this.jwPlayer.getState()||void 0===this.jwPlayer.getState())return 0===this.getElapsed()?"stopped":this.getElapsed()===this.getDuration()?"ended":"paused";if("BUFFERING"===this.jwPlayer.getState())return"buffering";if("PLAYING"===this.jwPlayer.getState())return"playing"}else if("youtube"===this.player){var a=this.youtubePlayer.getPlayerState();if(-1===a||5===a)return"stopped";if(0===a)return"ended";if(1===a)return"playing";if(2===a)return"paused";if(3===a)return"buffering"}},AblePlayer.prototype.isMuted=function(){return this.browserSupportsVolume()?"html5"===this.player?this.media.muted:"jw"===this.player?this.jwPlayer.getMute():"youtube"===this.player?this.youtubePlayer.isMuted():void 0:!1},AblePlayer.prototype.setMute=function(a){this.browserSupportsVolume()&&(a?(this.$muteButton.attr("aria-label",this.tt.unmute),this.$muteButton.find("span.able-clipped").text(this.tt.unmute)):(this.$muteButton.attr("aria-label",this.tt.mute),this.$muteButton.find("span.able-clipped").text(this.tt.mute)),"html5"===this.player?this.media.muted=a:"jw"===this.player?this.jwPlayer.setMute(a):"youtube"===this.player&&(a?this.youtubePlayer.mute():this.youtubePlayer.unMute()),a||this.lastVolume&&this.setVolume(this.lastVolume))},AblePlayer.prototype.setVolume=function(a){this.browserSupportsVolume()&&("html5"===this.player?(this.media.volume=a,this.hasSignLanguage&&this.signVideo&&(this.signVideo.volume=0)):"jw"===this.player?this.jwPlayer.setVolume(100*a):"youtube"===this.player&&this.youtubePlayer.setVolume(100*a),this.lastVolume=a)},AblePlayer.prototype.getVolume=function(){return this.browserSupportsVolume()?"html5"===this.player?this.media.volume:"jw"===this.player?this.jwPlayer.getVolume()/100:"youtube"===this.player?this.youtubePlayer.getVolume()/100:void 0:1},AblePlayer.prototype.isPlaybackRateSupported=function(){return"html5"===this.player?this.media.playbackRate?!0:!1:"jw"===this.player?!1:"youtube"===this.player?this.youtubePlayer.getAvailablePlaybackRates().length>1:void 0},AblePlayer.prototype.setPlaybackRate=function(a){a=Math.max(.5,a),"html5"===this.player?this.media.playbackRate=a:"youtube"===this.player&&this.youtubePlayer.setPlaybackRate(a),this.$speed.text(this.tt.speed+": "+a.toFixed(2).toString()+"x")},AblePlayer.prototype.getPlaybackRate=function(){return"html5"===this.player?this.media.playbackRate:"jw"===this.player?1:"youtube"===this.player?this.youtubePlayer.getPlaybackRate():void 0},AblePlayer.prototype.isPaused=function(){var a=this.getPlayerState();return"paused"===a||"stopped"===a||"ended"===a},AblePlayer.prototype.pauseMedia=function(){"html5"===this.player?(this.media.pause(!0),this.hasSignLanguage&&this.signVideo&&this.signVideo.pause(!0)):"jw"===this.player?this.jwPlayer.pause(!0):"youtube"===this.player&&this.youtubePlayer.pauseVideo()},AblePlayer.prototype.playMedia=function(){"html5"===this.player?(this.media.play(!0),this.hasSignLanguage&&this.signVideo&&this.signVideo.play(!0)):"jw"===this.player?this.jwPlayer.play(!0):"youtube"===this.player&&this.youtubePlayer.playVideo(),this.startedPlaying=!0},AblePlayer.prototype.refreshControls=function(){var b=this,c=this.getDuration(),d=this.getElapsed();if(this.useFixedSeekInterval===!1&&this.seekIntervalCalculated===!1&&c>0&&c>0&&(this.seekInterval=Math.max(this.seekInterval,c/10),this.seekIntervalCalculated=!0),this.seekBar&&(this.seekBar.setDuration(c),!this.seekBar.tracking)){var e=this.liveUpdatePending||this.seekBar.seekHead.is(a(document.activeElement));this.liveUpdatePending=!1,this.seekBar.setPosition(d,e)}var f;f=this.seekBar.tracking?this.seekBar.lastTrackPosition:d,this.$durationContainer.text(" / "+this.formatSecondsAsColonTime(c)),this.$elapsedTimeContainer.text(this.formatSecondsAsColonTime(f));var g={stopped:this.tt.statusStopped,paused:this.tt.statusPaused,playing:this.tt.statusPlaying,buffering:this.tt.statusBuffering,ended:this.tt.statusEnd};if(this.$status.text()===g[this.getPlayerState()]||this.seekBar.tracking)this.statusDebounceStart=null,clearTimeout(this.statusTimeout),this.statusTimeout=null;else{var h=(new Date).getTime();this.statusDebounceStart?h-this.statusDebounceStart>250&&(this.$status.text(g[this.getPlayerState()]),this.statusDebounceStart=null,clearTimeout(this.statusTimeout),this.statusTimeout=null):(this.statusDebounceStart=h,this.statusTimeout=setTimeout(function(){b.refreshControls()},300))}if(this.seekBar.tracking||(this.isPaused()?(this.$playpauseButton.attr("aria-label",this.tt.play),"font"===this.iconType?(this.$playpauseButton.find("span").first().removeClass("icon-pause").addClass("icon-play"),this.$playpauseButton.find("span.able-clipped").text(this.tt.play)):this.$playpauseButton.find("img").attr("src",this.playButtonImg)):(this.$playpauseButton.attr("aria-label",this.tt.pause),"font"===this.iconType?(this.$playpauseButton.find("span").first().removeClass("icon-play").addClass("icon-pause"),this.$playpauseButton.find("span.able-clipped").text(this.tt.pause)):this.$playpauseButton.find("img").attr("src",this.pauseButtonImg))),this.seekBar){var i=0,j=this.seekBar.wrapperDiv.parent().prev();j.children().each(function(){i+=a(this).width()});for(var k=this.seekBar.wrapperDiv.prev();k.length>0;)i+=k.width(),k=k.prev();for(var l=this.seekBar.wrapperDiv.next();l.length>0;)i+=l.width(),l=l.next();var m=this.$playerDiv.width()-i-20;Math.abs(m-this.seekBar.getWidth())>5&&this.seekBar.setWidth(m)}if(this.$descButton&&(this.descOn?(this.$descButton.removeClass("buttonOff").attr("aria-label",this.tt.turnOffDescriptions),this.$descButton.find("span.able-clipped").text(this.tt.turnOffDescriptions)):(this.$descButton.addClass("buttonOff").attr("aria-label",this.tt.turnOnDescriptions),this.$descButton.find("span.able-clipped").text(this.tt.turnOnDescriptions))),this.$ccButton&&(this.captionsOn?(this.$ccButton.removeClass("buttonOff"),1===this.captions.length&&(this.$ccButton.attr("aria-label",this.tt.hideCaptions),this.$ccButton.find("span.able-clipped").text(this.tt.hideCaptions))):(this.$ccButton.addClass("buttonOff"),1===this.captions.length&&(this.$ccButton.attr("aria-label",this.tt.showCaptions),this.$ccButton.find("span.able-clipped").text(this.tt.showCaptions))),this.captions.length>1&&(this.$ccButton.attr({"aria-label":this.tt.captions,"aria-haspopup":"true","aria-controls":this.mediaId+"-captions-menu"}),this.$ccButton.find("span.able-clipped").text(this.tt.captions))),this.$chaptersButton&&this.$chaptersButton.attr({"aria-label":this.tt.chapters,"aria-haspopup":"true","aria-controls":this.mediaId+"-chapters-menu"}),this.$muteButton&&(this.isMuted()?"font"===this.iconType?(this.$muteButton.find("span").first().removeClass("icon-volume-loud").addClass("icon-volume-mute"),this.$muteButton.find("span.able-clipped").text(this.tt.unmute)):this.$muteButton.find("img").attr("src",this.volumeMuteButtonImg):"font"===this.iconType?(this.$muteButton.find("span").first().removeClass("icon-volume-mute").addClass("icon-volume-loud"),this.$muteButton.find("span.able-clipped").text(this.tt.mute)):this.$muteButton.find("img").attr("src",this.volumeLoudButtonImg)),this.$fullscreenButton&&(this.isFullscreen()?(this.$fullscreenButton.attr("aria-label",this.tt.exitFullScreen),"font"===this.iconType?(this.$fullscreenButton.find("span").first().removeClass("icon-fullscreen-expand").addClass("icon-fullscreen-collapse"),this.$fullscreenButton.find("span.able-clipped").text(this.tt.exitFullScreen)):this.$fullscreenButton.find("img").attr("src",this.fullscreenCollapseButtonImg)):(this.$fullscreenButton.attr("aria-label",this.tt.enterFullScreen),"font"===this.iconType?(this.$fullscreenButton.find("span").first().removeClass("icon-fullscreen-collapse").addClass("icon-fullscreen-expand"),this.$fullscreenButton.find("span.able-clipped").text(this.tt.enterFullScreen)):this.$fullscreenButton.find("img").attr("src",this.fullscreenExpandButtonImg))),"undefined"!=typeof this.$bigPlayButton&&(this.isPaused()&&!this.seekBar.tracking?(this.$bigPlayButton.show(),this.isFullscreen()?(this.$bigPlayButton.width(a(window).width()),this.$bigPlayButton.height(a(window).height())):(this.$bigPlayButton.width(this.$mediaContainer.width()),this.$bigPlayButton.height(this.$mediaContainer.height()))):this.$bigPlayButton.hide()),this.includeTranscript&&(this.autoScrollTranscript!==this.$autoScrollTranscriptCheckbox.prop("checked")&&this.$autoScrollTranscriptCheckbox.prop("checked",this.autoScrollTranscript),this.autoScrollTranscript&&this.currentHighlight)){var n=Math.floor(a(".able-transcript").scrollTop()+a(this.currentHighlight).position().top-a(".able-transcript").height()/2+a(this.currentHighlight).height()/2);
n!==Math.floor(a(".able-transcript").scrollTop())&&(this.scrollingTranscript=!0,a(".able-transcript").scrollTop(n))}"html5"===this.player?this.media.buffered.length>0&&this.seekBar.setBuffered(this.media.buffered.end(0)/this.getDuration()):"jw"===this.player?this.seekBar.setBuffered(this.jwPlayer.getBuffer()/100):"youtube"===this.player&&this.seekBar.setBuffered(this.youtubePlayer.getVideoLoadedFraction())},AblePlayer.prototype.handlePlay=function(){this.isPaused()?this.playMedia():this.pauseMedia(),this.refreshControls()},AblePlayer.prototype.handleStop=function(){"html5"==this.player?(this.pauseMedia(),this.seekTo(0)):"jw"==this.player&&this.jwPlayer.stop(),this.refreshControls()},AblePlayer.prototype.handleRewind=function(){var a=this.getElapsed()-this.seekInterval;this.seekTo(0>a?0:a)},AblePlayer.prototype.handleFastForward=function(){var a=this.getElapsed()+this.seekInterval;this.seekTo(a>this.getDuration()?this.getDuration():a)},AblePlayer.prototype.handleMute=function(){this.setMute(this.isMuted()?!1:!0)},AblePlayer.prototype.handleVolume=function(a){var b;this.isMuted()&&this.setMute(!1),b=this.getVolume(),"up"===a?b=.9>b?Math.round(10*(b+.1))/10:1:"down"===a?b=b>.1?Math.round(10*(b-.1))/10:0:(a>=49||53>=a)&&(b=.2*(a-48)),this.setVolume(b),0===b&&this.setMute(!0)},AblePlayer.prototype.handleRateIncrease=function(){this.changeRate(1)},AblePlayer.prototype.handleRateDecrease=function(){this.changeRate(-1)},AblePlayer.prototype.changeRate=function(a){if("html5"===this.player)this.setPlaybackRate(this.getPlaybackRate()+.25*a);else if("youtube"===this.player){var b=this.youtubePlayer.getAvailablePlaybackRates(),c=this.getPlaybackRate(),d=b.indexOf(c);-1===d||(d+=a,d<b.length&&d>=0&&this.setPlaybackRate(b[d]))}},AblePlayer.prototype.handleCaptionToggle=function(){if(this.hidingPopup)return this.hidingPopup=!1,!1;if(1===this.captions.length){if(this.captionsOn===!0)this.captionsOn=!1,this.$captionDiv.hide();else{this.captionsOn=!0,this.$captionDiv.show();for(var a=0;a<this.captions.length;a++)this.captions[a].def===!0&&(this.selectedCaptions=this.captions[a]);this.selectedCaptions=this.captions[0],this.descriptions.length>=0&&(this.selectedDescriptions=this.descriptions[0])}this.refreshControls()}else this.captionsPopup.is(":visible")?(this.captionsPopup.hide(),this.$ccButton.focus()):(this.closePopups(),this.captionsPopup.show(),this.captionsPopup.css("top",this.$ccButton.position().top-this.captionsPopup.outerHeight()),this.captionsPopup.css("left",this.$ccButton.position().left),this.captionsPopup.find("li").removeClass("able-focus"),this.captionsPopup.find("input:checked")?this.captionsPopup.find("input:checked").focus().parent().addClass("able-focus"):this.captionsPopup.find("input").first().focus().parent().addClass("able-focus"))},AblePlayer.prototype.handleChapters=function(){return this.hidingPopup?(this.hidingPopup=!1,!1):void(this.chaptersPopup.is(":visible")?(this.chaptersPopup.hide(),this.$chaptersButton.focus()):(this.closePopups(),this.chaptersPopup.show(),this.chaptersPopup.css("top",this.$chaptersButton.position().top-this.chaptersPopup.outerHeight()),this.chaptersPopup.css("left",this.$chaptersButton.position().left),this.chaptersPopup.find("li").removeClass("able-focus"),this.chaptersPopup.find("input:checked")?this.chaptersPopup.find("input:checked").focus().parent().addClass("able-focus"):this.chaptersPopup.find("input").first().focus().parent().addClass("able-focus")))},AblePlayer.prototype.handleDescriptionToggle=function(){this.descOn=!this.descOn,this.updateDescription(),this.refreshControls()},AblePlayer.prototype.handlePrefsClick=function(){this.setFullscreen(!1),this.prefsDialog.show()},AblePlayer.prototype.handleHelpClick=function(){this.setFullscreen(!1),this.helpDialog.show()},AblePlayer.prototype.handleTranscriptToggle=function(){this.$transcriptDiv.is(":visible")?(this.$transcriptArea.hide(),this.$transcriptButton.addClass("buttonOff").attr("aria-label",this.tt.showTranscript),this.$transcriptButton.find("span.able-clipped").text(this.tt.showTranscript)):(this.$transcriptArea.show(),this.$transcriptButton.removeClass("buttonOff").attr("aria-label",this.tt.hideTranscript),this.$transcriptButton.find("span.able-clipped").text(this.tt.hideTranscript))},AblePlayer.prototype.handleSignToggle=function(){if(this.$signWindow.is(":visible"))this.$signWindow.hide(),this.$signButton.addClass("buttonOff").attr("aria-label",this.tt.showSign),this.$signButton.find("span.able-clipped").text(this.tt.showSign);else{this.$signWindow.show();var a=this.$signWindow.offset();this.dragStartX=a.left,this.dragStartY=a.top,this.$signButton.removeClass("buttonOff").attr("aria-label",this.tt.hideSign),this.$signButton.find("span.able-clipped").text(this.tt.hideSign)}},AblePlayer.prototype.isFullscreen=function(){return this.nativeFullscreenSupported()?document.fullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement||document.mozFullScreenElement||document.msFullscreenElement?!0:!1:this.modalFullscreenActive?!0:!1},AblePlayer.prototype.setFullscreen=function(b){if(this.isFullscreen()!=b){var c=this,d=this.$ableDiv,e=d[0];if(this.nativeFullscreenSupported())b?e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen():document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen();else{if(!this.fullscreenDialog){var f=a("<div>");this.fullscreenDialog=new AccessibleDialog(f,"Fullscreen dialog","Fullscreen video player","100%",!0,function(){c.handleFullscreenToggle()}),a("body").append(f)}var g=this.isPaused();if(b){this.modalFullscreenActive=!0,this.fullscreenDialog.show(),this.$modalFullscreenPlaceholder=a('<div class="placeholder">'),this.$modalFullscreenPlaceholder.insertAfter(d),d.appendTo(this.fullscreenDialog.modal),d===this.$ableColumnLeft&&d.width("100%");var h=a(window).height()-this.$playerDiv.height();this.$descDiv.is(":hidden")||(h-=c.$descDiv.height()),this.resizePlayer(a(window).width(),h)}else this.modalFullscreenActive=!1,d===this.$ableColumnLeft&&d.width("50%"),d.insertAfter(this.$modalFullscreenPlaceholder),this.$modalFullscreenPlaceholder.remove(),this.fullscreenDialog.hide(),this.resizePlayer(this.playerWidth,this.playerHeight);!g&&this.isPaused()&&this.playMedia()}this.refreshControls()}},AblePlayer.prototype.handleFullscreenToggle=function(){this.setFullscreen(!this.isFullscreen())},AblePlayer.prototype.handleTranscriptLockToggle=function(a){this.autoScrollTranscript=a,this.refreshControls()},AblePlayer.prototype.showAlert=function(a,b){var c,d;c="sign"===b?this.$windowAlert:this.alertBox,c.show(),c.text(a),"sign"===b?(d=this.$signWindow.width()>c.width()?this.$signWindow.width()/2-c.width()/2:10,c.css({top:this.$signWindow.height()/3*2,left:d})):c.css({left:this.$playerDiv.offset().left+this.$playerDiv.width()/2-c.width()/2}),setTimeout(function(){c.fadeOut(300)},3e3)},AblePlayer.prototype.resizePlayer=function(a,b){this.$media.height(b),this.$media.width(a),this.$captionDiv&&(this.$captionDiv.width(a),b!==this.playerHeight?this.$captionDiv.css("font-size",b/this.playerHeight*18):this.$captionDiv.css("font-size","")),this.$descDiv&&this.$descDiv.width(a),this.$vidcapContainer&&(this.$vidcapContainer.height(b),this.$vidcapContainer.width(a)),this.$ableDiv.width(a),this.jwPlayer?this.jwPlayer.resize(a,b):this.youtubePlayer&&this.youtubePlayer.setSize(a,b),this.refreshControls()}}(jQuery),function(){AblePlayer.prototype.updateCaption=function(a){this.captionsOn?(this.$captionDiv.show(),this.showCaptions(a||this.getElapsed())):this.$captionDiv&&this.$captionDiv.hide()},AblePlayer.prototype.getCaptionClickFunction=function(a){var b=this;return function(){b.captionsOn=!0,b.selectedCaptions=a,b.captionLang=a.language,b.currentCaption=-1;for(var c in b.descriptions)b.descriptions[c].language===a.language&&(b.selectedDescriptions=b.descriptions[c],b.currentDescription=-1);b.hidingPopup=!0,b.captionsPopup.hide(),b.$ccButton.focus(),b.refreshControls(),b.updateCaption(),b.updateDescription()}},AblePlayer.prototype.getCaptionOffFunction=function(){var a=this;return function(){a.captionsOn=!1,a.currentCaption=-1,a.captionsPopup.hide(),a.$ccButton.focus(),a.refreshControls(),a.updateCaption()}},AblePlayer.prototype.showCaptions=function(a){var b,c,d;d=this.selectedCaptions?this.selectedCaptions.cues:this.captions.length>=1?this.captions[0].cues:[];for(b in d)if(d[b].start<=a&&d[b].end>a){c=b;break}"undefined"!=typeof c?this.currentCaption!==c&&(this.$captionDiv.html(this.flattenCueForCaption(d[c]).replace("\n","<br>")),this.currentCaption=c):(this.$captionDiv.html(""),this.currentCaption=-1)},AblePlayer.prototype.flattenCueForCaption=function(a){var b=[],c=function(a){var b=[];if("string"===a.type)b.push(a.value);else if("v"===a.type){b.push("["+a.value+"]");for(var d in a.children)b.push(c(a.children[d]))}else for(var d in a.children)b.push(c(a.children[d]));return b.join("")};for(var d in a.components.children)b.push(c(a.components.children[d]));return b.join("")}}(jQuery),function(){AblePlayer.prototype.updateMeta=function(a){this.hasMeta&&(this.$metaDiv.show(),this.showMeta(a||this.getElapsed()))},AblePlayer.prototype.showMeta=function(a){var b,c,d;d=this.meta.length>=1?this.meta:[];for(b in d)if(d[b].start<=a&&d[b].end>a){c=b;break}"undefined"!=typeof c?this.currentMeta!==c&&(this.$metaDiv.html(this.flattenCueForMeta(d[c]).replace("\n","<br>")),this.currentMeta=c):(this.$metaDiv.html(""),this.currentMeta=-1)},AblePlayer.prototype.flattenCueForMeta=function(a){var b=[],c=function(a){var b=[];if("string"===a.type)b.push(a.value);else if("v"===a.type){b.push("["+a.value+"]");for(var d in a.children)b.push(c(a.children[d]))}else for(var d in a.children)b.push(c(a.children[d]));return b.join("")};for(var d in a.components.children)b.push(c(a.components.children[d]));return b.join("")}}(jQuery),function(a){AblePlayer.prototype.getSupportedLangs=function(){var a=["en","de"];return a},AblePlayer.prototype.getTranslationText=function(){var b,c,d,e;return b=a.Deferred(),this.forceLang||(a("body").attr("lang")?c=a("body").attr("lang"):a("html").attr("lang")&&(c=a("html").attr("lang")),c!==this.lang&&(e="Language of web page ("+c+") ",-1!==a.inArray(c,this.getSupportedLangs())?(e+=" has a translation table available.",this.lang=c):e+=" is not currently supported. Using default language ("+this.lang+")",this.debug)),d=this,a.getJSON(this.translationPath+this.lang+".js",function(a,b){return"success"!==b?!1:(d.tt=a,void d.debug)}).then(function(){b.resolve()},function(){return!1}),b.promise()}}(jQuery),function(a){AblePlayer.prototype.updateTranscript=function(){if(this.includeTranscript){var b,c,d;if(this.transcriptCaptions?(d=this.transcriptCaptions.language,b=this.transcriptCaptions.cues):this.selectedCaptions&&(d=this.captionLang,b=this.selectedCaptions.cues),this.transcriptDescriptions)c=this.transcriptDescriptions.cues;else if(this.descriptions.length>0){if(d)for(var e in this.descriptions)this.descriptions[e].language===d&&(c=this.descriptions[e].cues);c||(c=this.descriptions[0].cues)}var f=this.generateTranscript(b||[],c||[]);this.$transcriptDiv.html(f);var g=this;1===this.prefTabbable&&a(".able-transcript span.able-transcript-seekpoint").attr("tabindex","0"),a(".able-transcript").length>0&&a(".able-transcript span.able-transcript-seekpoint").click(function(){var b=parseFloat(a(this).attr("data-start"));b+=.01,g.seekTo(b)})}},AblePlayer.prototype.highlightTranscript=function(b){if(this.includeTranscript){var c,d,e=this;b=parseFloat(b),a(".able-transcript span.able-transcript-caption").each(function(){return c=parseFloat(a(this).attr("data-start")),d=parseFloat(a(this).attr("data-end")),b>=c&&d>=b?(a(".able-highlight").removeClass("able-highlight"),a(this).addClass("able-highlight"),!1):void 0}),e.currentHighlight=a(".able-highlight"),0===e.currentHighlight.length&&(e.currentHighlight=null)}},AblePlayer.prototype.generateTranscript=function(b,c){var d=this,e=a('<div class="able-transcript-container"></div>'),f="Transcript";if("undefined"!=typeof this.transcriptTitle?f=this.transcriptTitle:this.lyricsMode&&(f="Lyrics"),"undefined"==typeof this.transcriptDivLocation&&""!=f){var g=this.playerHeadingLevel;g+=1,g>6&&(g=6);var h="h"+g.toString(),i="<"+h+' class="able-transcript-heading">';i+=f,i+="</"+h+">",e.append(i)}for(var j=0,k=0,l=function(b,c){var d=a('<div class="able-desc"><span class="hidden">Description: </span></div>'),e=function(a){var b=[];if("string"===a.type)b.push(a.value);else for(var c in a.children)b=b.concat(e(a.children[c]));return b},f=a('<span class="able-transcript-seekpoint"></span>');for(var g in c.components.children){var h=e(c.components.children[g]);for(var i in h)f.append(h[i])}f.attr("data-start",c.start.toString()),f.attr("data-end",c.end.toString()),d.append(f),b.append(d)},m=function(b,c){var e=a('<span class="able-transcript-seekpoint able-transcript-caption"></span>'),f=function(b){var c=[],d=function(b){var c=[];if(""===b)return c;var e=b.indexOf("["),f=b.indexOf("]"),g=b.indexOf("("),h=b.indexOf(")"),i=-1!==e&&-1!==f,j=-1!==g&&-1!==h;return j&&i&&g>e||i?(c=c.concat(d(b.substring(0,e))),c.push(a('<div></div><span class="able-unspoken">'+b.substring(e,f+1)+"</span>")),c=c.concat(d(b.substring(f+1)))):j?(c=c.concat(d(b.substring(0,g))),c.push(a('<div></div><span class="able-unspoken">'+b.substring(g,h+1)+"</span>")),c=c.concat(d(b.substring(h+1)))):c.push(b),c};if("string"===b.type)c=c.concat(d(b.value));else if("v"===b.type){var e=a('<div></div><span class="able-unspoken">['+b.value+"]</span>");c.push(e);for(var g in b.children){var h=f(b.children[g]);for(var i in h)c.push(h[i])}}else for(var g in b.children)c=c.concat(f(b.children[g]));return c};for(var g in c.components.children){var h=f(c.components.children[g]);for(var i in h){var j=h[i];"string"==typeof j&&d.lyricsMode&&(j=j.replace("\n","<br>")+"<br>"),e.append(j)}}e.attr("data-start",c.start.toString()),e.attr("data-end",c.end.toString()),b.append(e),b.append("\n")};j<b.length||k<c.length;)j<b.length&&k<c.length?c[k].start<=b[j].start?(l(e,c[k]),k+=1):(m(e,b[j]),j+=1):j<b.length?(m(e,b[j]),j+=1):k<c.length&&(l(e,c[k]),k+=1);return e}}(jQuery),function(a){AblePlayer.prototype.showSearchResults=function(){var b=this;if(this.searchDiv&&this.searchString&&a("#"+this.SearchDiv)){var c=this.searchFor(this.searchString);if(c.length>0){var d=a("<p>",{"class":"able-search-results-summary"}),e="Found <strong>"+c.length+"</strong> matching items. ";e+="Click the time associated with any item ",e+="to play the video from that point.",d.html(e);var f=a("<ul>");for(var g in c){var h=a("<li>",{}),i=this.secondsToTime(c[g].start),j=a("<span>",{"class":"able-search-results-time","data-start":c[g].start,title:i.title,tabindex:"0"});j.text(i.value),j.click(function(){var c=parseFloat(a(this).attr("data-start"));c+=.01,b.seeking=!0,b.seekTo(c)});var k=a("<span>",{"class":"able-search-result-text"});k.html("..."+c[g].caption+"..."),h.append(j,k),f.append(h)}a("#"+this.searchDiv).append(d,f)}else{var l=a("<p>").text("No results found.");a("#"+this.searchDiv).append(l)}}},AblePlayer.prototype.searchFor=function(a){var b,c,d,e,f,g,h,i=a.split(" ");if(this.captions.length>0&&(b=this.captions[0].language,c=this.captions[0].cues,c.length>0)){var d=[];f=0;for(g in c)if("string"===c[g].components.children[0].type){e=c[g].components.children[0].value;for(h in i)if(-1!==e.indexOf(i[h])){d[f]=[],d[f].start=c[g].start,d[f].caption=this.highlightSearchTerm(i,h,e),f++;break}}}return d},AblePlayer.prototype.highlightSearchTerm=function(a,b,c){var d,e,f,g,h,i,j;for(d=b;d<a.length;d++)e=a[d],f=c.indexOf(e),-1!==f&&(g=e.length,g>0?(h=c.substring(0,f),i='<span class="able-search-term">'+e+"</span>",j=c.substring(f+g),c=h+i+j):(h='<span class="able-search-term">'+e+"</span>",i=c.substring(f+g),c=h+i));return c},AblePlayer.prototype.secondsToTime=function(a){var a=Math.floor(a),b=parseInt(a/3600)%24,c=parseInt(a/60)%60,d=a%60,e="",f="";b>0&&(e+=b+":"),10>c?(e+="0"+c+":",c>0&&(f+=c+" minutes ")):(e+=c+":",f+=c+" minutes "),10>d?(e+="0"+d,d>0&&(f+=d+" seconds ")):(e+=d,f+=d+" seconds ");var g=[];return g.value=e,g.title=f,g}}(jQuery),function(a){AblePlayer.prototype.onMediaUpdateTime=function(){this.startedPlaying||(this.startTime?this.startTime===this.media.currentTime?(this.autoplay||this.seeking)&&(this.playMedia(),this.seeking=!1):this.seekTo(this.startTime):this.autoplay&&this.playMedia()),1===this.prefHighlight&&this.highlightTranscript(this.getElapsed()),this.updateCaption(),this.updateDescription(),this.updateMeta(),this.refreshControls()},AblePlayer.prototype.onMediaPause=function(){this.debug},AblePlayer.prototype.onMediaComplete=function(){this.hasPlaylist&&(this.playlistIndex===this.$playlist.length-1?this.loop&&(this.playlistIndex=0,this.swapSource(0)):(this.playlistIndex++,this.swapSource(this.playlistIndex))),this.refreshControls()},AblePlayer.prototype.onMediaNewSourceLoad=function(){if(this.swappingSrc===!0){if("jw"===this.player){var a=this.jwPlayer;setTimeout(function(){a.play(!0)},500)}else this.playMedia();this.swappingSrc=!1,this.refreshControls()}},AblePlayer.prototype.onWindowResize=function(){if(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||this.modalFullscreenActive){var b=a(window).height()-this.$playerDiv.height();this.$descDiv.is(":hidden")||(b-=this.$descDiv.height()),this.resizePlayer(a(window).width(),b)}else this.resizePlayer(this.playerWidth,this.playerHeight)},AblePlayer.prototype.addSeekbarListeners=function(){var a=this;this.seekBar.bodyDiv.on("startTracking",function(){a.pausedBeforeTracking=a.isPaused(),a.pauseMedia()}).on("tracking",function(b,c){a.highlightTranscript(c),a.updateCaption(c),a.updateDescription(c),a.updateMeta(c),a.refreshControls()}).on("stopTracking",function(b,c){a.seekTo(c),a.pausedBeforeTracking||setTimeout(function(){a.playMedia()},200)})},AblePlayer.prototype.onClickPlayerButton=function(b){var c=a(b).attr("class").split(" ")[0].substr(20);"play"===c?this.handlePlay():"stop"===c?this.handleStop():"rewind"===c?this.handleRewind():"forward"===c?this.handleFastForward():"mute"===c?this.handleMute():"volume-up"===c?this.handleVolume("up"):"volume-down"===c?this.handleVolume("down"):"faster"===c?this.handleRateIncrease():"slower"===c?this.handleRateDecrease():"captions"===c?this.handleCaptionToggle():"chapters"===c?this.handleChapters():"descriptions"===c?this.handleDescriptionToggle():"sign"===c?this.handleSignToggle():"preferences"===c?this.handlePrefsClick():"help"===c?this.handleHelpClick():"transcript"===c?this.handleTranscriptToggle():"fullscreen"===c&&this.handleFullscreenToggle()},AblePlayer.prototype.okToHandleKeyPress=function(){var b=a(document.activeElement).prop("tagName");return"INPUT"===b?!1:!0},AblePlayer.prototype.onPlayerKeyPress=function(b){if(!this.okToHandleKeyPress())return!1;var c=b.which;if(c>=65&&90>=c&&(c+=32),27===c)this.closePopups();else if(32===c)a(".able-controller button").is(":focus")||this.handlePlay();else if(112===c)this.usingModifierKeys(b)&&this.handlePlay();else if(115===c)this.usingModifierKeys(b)&&this.handleStop();else if(109===c)this.usingModifierKeys(b)&&this.handleMute();else if(117===c)this.usingModifierKeys(b)&&this.handleVolume("up");else if(100===c)this.usingModifierKeys(b)&&this.handleVolume("down");else if(c>=49&&53>=c)this.usingModifierKeys(b)&&this.handleVolume(c);else if(99===c)this.usingModifierKeys(b)&&this.handleCaptionToggle();else if(102===c)this.usingModifierKeys(b)&&this.handleFastForward();else if(114===c)this.usingModifierKeys(b)&&this.handleRewind();else if(110===c)this.usingModifierKeys(b)&&this.handleDescriptionToggle();else if(104===c)this.usingModifierKeys(b)&&this.handleHelpClick();else if(116===c)this.usingModifierKeys(b)&&this.handlePrefsClick();else if(104===c)this.usingModifierKeys(b)&&this.handleHelpClick();else if(13===c){var d=a(document.activeElement);"SPAN"===d.prop("tagName")?d.click():"LI"===d.prop("tagName")&&d.click()}},AblePlayer.prototype.addHtml5MediaListeners=function(){var a=this;this.$media.on("emptied",function(){a.debug}).on("loadedmetadata",function(){a.debug,a.onMediaNewSourceLoad()}).on("canplay",function(){a.debug,a.startTime&&!a.startedPlaying&&a.seekTo(a.startTime)}).on("canplaythrough",function(){a.debug,a.startTime&&!a.startedPlaying&&a.seekTo(a.startTime)}).on("playing",function(){a.refreshControls()}).on("ended",function(){a.onMediaComplete()}).on("progress",function(){a.refreshControls()}).on("waiting",function(){a.refreshControls()}).on("durationchange",function(){a.refreshControls()}).on("timeupdate",function(){a.onMediaUpdateTime()}).on("play",function(){a.debug}).on("pause",function(){a.onMediaPause()}).on("ratechange",function(){a.debug}).on("volumechange",function(){a.debug}).on("error",function(){if(a.debug)switch(a.media.error.code){case 1:break;case 2:break;case 3:break;case 4:}})},AblePlayer.prototype.addJwMediaListeners=function(){var b=this;this.jwPlayer.onTime(function(){b.onMediaUpdateTime()}).onComplete(function(){b.onMediaComplete()}).onReady(function(){b.debug,a("#"+b.jwId).removeAttr("tabindex"),b.startTime>0&&!b.startedPlaying&&(b.seekTo(b.startTime),b.startedPlaying=!0),b.refreshControls()}).onSeek(function(a){b.debug&&console.log("Seeking to "+a.position+"; target: "+a.offset),b.jwSeekPause&&(b.jwSeekPause=!1,b.playMedia()),setTimeout(function(){b.refreshControls()},300)}).onPlay(function(){b.debug,b.refreshControls()}).onPause(function(){b.onMediaPause()}).onBuffer(function(){b.debug,b.refreshControls()}).onBufferChange(function(){b.refreshControls()}).onIdle(function(){b.debug,b.refreshControls()}).onMeta(function(){b.debug}).onPlaylist(function(){b.debug,b.onMediaNewSourceLoad()})},AblePlayer.prototype.addEventListeners=function(){var b;b=this,a(window).resize(function(){b.onWindowResize()}),this.addSeekbarListeners(),this.$controllerDiv.find("button").click(function(){b.onClickPlayerButton(this)}),this.$ableDiv.keydown(function(a){AblePlayer.nextIndex>1&&b.onPlayerKeyPress(a)}),this.$playlist&&this.$playlist.click(function(){b.playlistIndex=a(this).index(),b.swapSource(b.playlistIndex)}),this.$media.click(function(){b.handlePlay()}),"html5"===this.player?this.addHtml5MediaListeners():"jw"===this.player?this.addJwMediaListeners():"youtube"===this.player&&setInterval(function(){b.onMediaUpdateTime()},300)}}(jQuery),function(a){AblePlayer.prototype.initDragDrop=function(a){this.$activeWindow=a,a.is(".able-sign-window")&&(this.windowName="sign-window"),this.addWindowMenu()},AblePlayer.prototype.addWindowMenu=function(){var b=this;this.$windowAlert=a('<div role="alert"></div>'),this.$windowAlert.addClass("able-alert"),this.$windowAlert.appendTo(this.$activeWindow),this.$windowAlert.css({top:this.$activeWindow.offset().top});var c=a("<button>",{type:"button",tabindex:"0","aria-label":this.tt.windowButtonLabel,"class":"able-button-handler-preferences"});if("font"===this.iconType){var d=a("<span>",{"class":"icon-preferences","aria-hidden":"true"});c.append(d)}else{var e="../images/"+this.iconColor+"/preferences.png",f=a("<img>",{src:e,alt:"",role:"presentation"});c.append(f)}var g=a("<span>",{"class":"able-clipped"}).text(this.tt.windowButtonLabel);c.append(g);var h=this.mediaId+"-"+this.windowName+"-tooltip",i=a("<div>",{"class":"able-tooltip",id:h});c.on("mouseenter focus",function(){var b=a(this).attr("aria-label"),c=a(this).position(),d=a(this).height(),e=(a(this).width(),c.top-d-5),f=0,g={left:"",right:f+"px",top:e+"px"};a("#"+h).text(b).css(g).show().delay(4e3).fadeOut(1e3),a(this).on("mouseleave blur",function(){a("#"+h).text("").hide()})}),this.addResizeDialog();var j=this.createPopup(this.windowName),k=a("<ul></ul>"),l=this.mediaId+"-"+this.windowName+"-choice";if("sign-window"==this.windowName){var m=[];m.push({name:"move",label:this.tt.windowMove}),m.push({name:"resize",label:this.tt.windowResize}),m.push(this.$activeWindow.css("z-index")>0?{name:"sendBack",label:this.tt.windowSendBack}:{name:"bringTop",label:this.tt.windowBringTop});for(var n in m){var o=a("<li></li>"),p=m[n],q=l+"-"+n,r=a("<input>",{type:"radio",val:p.name,name:l,id:q}),s=a("<label>",{"for":q});s.text(p.label),r.on("click keypress",function(c){c.preventDefault(),b.handleMenuChoice(a(this).val())}),o.append(r,s),k.append(o)}}j.append(k),c.on("click keydown",function(a){b.handleWindowButtonClick(a)}),this.$activeWindow.append(c,i,j),this.$windowButton=c,this.$windowPopup=j},AblePlayer.prototype.addResizeDialog=function(){var b=this,c=this.mediaId+"-resize-width",d=(this.mediaId+"-resize-height",this.$activeWindow.width()),e=(this.$activeWindow.height(),a("<div></div>",{"class":"able-resize-form"})),f=a("<div></div>"),g=a("<div></div>"),h=a("<input>",{type:"text",id:c,value:d}),i=a("<label>",{"for":c}).text(this.tt.width),j=a('<button class="modal-button">'+this.tt.save+"</button>"),k=a('<button class="modal-button">'+this.tt.cancel+"</button>");j.click(function(){var e=a("#"+c).val();e!==d&&(b.$activeWindow.css("width",e),b.$activeWindow.find("video").css({width:e+"px"})),b.resizeDialog.hide(),b.$windowPopup.hide(),b.$windowButton.show().focus()}),k.click(function(){dialog.hide()}),g.append(i,h),f.append(g),e.append(f,"<hr>",j,k),a("body").append(e),this.resizeDialog=new AccessibleDialog(e,"alert",this.tt.windowResizeHeading,f,this.tt.closeButtonLabel,"20em")},AblePlayer.prototype.handleWindowButtonClick=function(a){return a.which>1&&32!==a.which&&13!==a.which?!1:this.hidingPopup?(this.hidingPopup=!1,!1):(this.$windowButton.hide(),this.$windowPopup.show(),this.$windowPopup.find("li").removeClass("able-focus"),this.$windowPopup.find("input:checked").val()?this.$windowPopup.find("input:checked").focus().parent().addClass("able-focus"):this.$windowPopup.find("input").first().focus().parent().addClass("able-focus"),void a.preventDefault())},AblePlayer.prototype.handleMenuChoice=function(a){var b=this;if("move"==a)this.showAlert(this.tt.windowMoveAlert,"sign"),b.startDrag(),this.$windowPopup.hide().parent().focus();else if("resize"==a)this.resizeDialog.show(),this.showAlert(this.tt.windowResizeAlert,"sign");else if("sendBack"==a){this.$activeWindow.css("z-index","0"),this.$windowPopup.css("z-index","4000").hide(),this.$windowButton.show().focus(),this.showAlert(this.tt.windowSendBackAlert,"sign");var c=this.$windowPopup.find("input:last");c.val("bringTop"),c.next("label").text(this.tt.windowBringTop)}else if("bringTop"==a){this.$activeWindow.css({"z-index":"4000"}),this.$windowPopup.hide(),this.$windowButton.show().focus(),this.showAlert(this.tt.windowBringTopAlert,"sign");var c=this.$windowPopup.find("input:last");c.val("sendBack"),c.next("label").text(this.tt.windowSendBack)}},AblePlayer.prototype.startDrag=function(){var b,c,d,e;return b=this,this.$activeWindow.addClass("able-drag").css({position:"absolute",top:this.dragStartY+"px",left:this.dragStartX+"px"}),c=this.$activeWindow.offset(),this.dragStartX=this.dXKeys=c.left,this.dragStartY=this.dYKeys=c.top,a(document).on("mousedown",function(a){b.dragging=!0,b.startMouseX=a.pageX,b.startMouseY=a.pageY,b.dragOffsetX=b.startMouseX-b.dragStartX,b.dragOffsetY=b.startMouseY-b.dragStartY}),a(document).on("mousemove",function(a){b.dragging&&(d=a.pageX-b.dragOffsetX,e=a.pageY-b.dragOffsetY,b.resetDraggedObject(d,e))}),a(document).on("mouseup",function(){b.dragging&&b.dragEnd()}),this.startingDrag=!0,this.$activeWindow.on("keydown",function(a){b.dragKeys(a)}),!1},AblePlayer.prototype.dragKeys=function(a){var b,c;if(this.startingDrag)return this.startingDrag=!1,!1;switch(b=a.which,c=10,b){case 37:case 63234:this.dXKeys-=c;break;case 38:case 63232:this.dYKeys-=c;break;case 39:case 63235:this.dXKeys+=c;break;case 40:case 63233:this.dYKeys+=c;break;case 13:case 27:return this.dragEnd(),!1;default:return!1}return this.resetDraggedObject(this.dXKeys,this.dYKeys),a.preventDefault&&a.preventDefault(),!1},AblePlayer.prototype.resetDraggedObject=function(a,b){this.$activeWindow.css({left:a+"px",top:b+"px"})},AblePlayer.prototype.dragEnd=function(){a(document).off("mousemove mouseup"),this.$activeWindow.off("keydown").removeClass("able-drag"),this.hidingPopup=!0,this.$windowPopup.hide(),this.$windowButton.show().focus(),this.dragging=!1}}(jQuery),function(a){AblePlayer.prototype.initSignLanguage=function(){"html5"===this.player&&this.prefSignLanguage&&(this.signFile=this.$sources.first().attr("data-sign-src"),this.signFile?(this.debug,this.hasSignLanguage=!0,this.injectSignPlayerCode()):this.hasSignLanguage=!1)},AblePlayer.prototype.injectSignPlayerCode=function(){var b,c,d,e,f,g;for(b=this,c=this.mediaId+"-sign",this.$signVideo=a("<video>",{id:c,width:this.playerWidth,tabindex:"-1"}),this.signVideo=this.$signVideo[0],d=0;d<this.$sources.length;d++){if(e=this.$sources[d].getAttribute("data-sign-src"),f=this.$sources[d].getAttribute("type"),!e){this.hasSignLanguage=!1;break}g=a("<source>",{src:e,type:f}),this.$signVideo.append(g)}this.$signWindow=a("<div>",{"class":"able-sign-window",draggable:"true",tabindex:"-1"}),this.$signWindow.append(this.$signVideo).hide(),this.$ableColumnRight?this.$ableColumnRight.append(this.$signWindow):this.splitPlayerIntoColumns("sign"),this.initDragDrop(this.$signWindow)}}(jQuery);